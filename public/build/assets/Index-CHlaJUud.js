import{d as K,m as P,z as l,c as k,P as Q,H as R,h as w,o as i,w as C,f as o,e as t,b as h,u as a,j as U,t as r,g as v,a as d,F,r as M,l as $,k as G,B as S}from"./app-CpxPSk2w.js";import{F as J}from"./FinancialAppLayout-D9Y2dRaH.js";import{u as W}from"./useTranslation-DPvSmIIm.js";import{f as p}from"./formatCurrency-6zMsDc4Z.js";import X from"./SearchModal-DHCQwRFK.js";import Y from"./TransactionCard-CGrQnqm1.js";import{S as Z}from"./search-DQ9PXY1z.js";import{F as tt}from"./filter-DBc-tKm4.js";import{C as et}from"./chevron-left-BoHFBZS6.js";import{C as T}from"./calendar-jM8SHZ85.js";import{C as at}from"./chevron-right-Cqmcaz5y.js";import{T as st}from"./trending-up-Bf7i0duD.js";import{T as ot}from"./trending-down-7rElmRRF.js";import{D}from"./dollar-sign-Hmyj7hj7.js";import"./useDarkMode-CPfEmPz6.js";import"./createLucideIcon-CxMOwcMx.js";import"./x-sqW9_gms.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./settings-Cz58leFT.js";import"./sun-DhMHM8Is.js";import"./receipt-CqvJQWyV.js";import"./arrow-right-left-CVzE9XSL.js";import"./credit-card-DvKJLfBl.js";import"./tag-BA6I5CpT.js";import"./trash-2-ChkN5Du9.js";import"./eye-BhHy6kpU.js";import"./square-pen-DsBtEEyT.js";const nt={class:"bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-b-[24px] px-4 pt-4 pb-6 mb-4 shadow-lg dark:shadow-2xl"},it={class:"flex items-center justify-between mb-4"},rt={class:"flex-1 min-w-0"},lt={class:"text-xl font-semibold text-white truncate"},dt={class:"text-sm text-teal-100 dark:text-teal-200 truncate"},ct={class:"flex items-center gap-2 ml-3"},mt={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full"},ut={class:"flex items-center justify-between mb-4 bg-white/10 rounded-xl p-3"},ht={class:"flex items-center gap-2 text-white"},pt={class:"font-medium"},xt={class:"grid grid-cols-3 gap-3"},gt={class:"bg-white/10 rounded-xl p-3 text-center"},ft={class:"text-sm font-bold text-white"},wt={class:"bg-white/10 rounded-xl p-3 text-center"},vt={class:"text-sm font-bold text-white"},bt={class:"bg-white/10 rounded-xl p-3 text-center"},_t={class:"px-2"},yt={class:"bg-gray-50 dark:bg-gray-700/50 px-4 py-3 border-b border-gray-200 dark:border-gray-700"},kt={class:"flex items-center justify-between"},Ct={class:"flex items-center gap-2"},Ft={class:"text-sm font-medium text-gray-900 dark:text-white"},Mt={class:"text-right"},St={class:"divide-y divide-gray-100 dark:divide-gray-700"},Tt={key:0,class:"text-center py-12 px-4"},Dt={class:"text-gray-400 mb-6"},jt={class:"text-sm text-gray-500 mt-1"},It={class:"flex flex-col gap-3"},re=K({__name:"Index",props:{transactions:{},pageTitle:{}},setup(j){const I=j;W();const{success:At,error:Bt,warning:A,info:b}=P();l(!1);const x=l(!1),B=l(!1),g=l(I.transactions.filters.month||new Date().toISOString().slice(0,7)),m=l(""),n=l({account_ids:[],category_ids:[],type:"both",flags:[],tag_ids:[],amount_min:void 0,amount_max:void 0}),f=k(()=>new Date(g.value+"-01").toLocaleDateString("id-ID",{month:"long",year:"numeric"})),u=k(()=>!!(m.value||n.value.account_ids.length>0||n.value.category_ids.length>0||n.value.tag_ids.length>0||n.value.type!=="both"||n.value.flags.length>0||n.value.amount_min||n.value.amount_max)),L=()=>{x.value=!0},_=()=>{x.value=!1},N=()=>{B.value=!0},V=()=>{const e=new Date(g.value+"-01");e.setMonth(e.getMonth()-1);const s=e.toISOString().slice(0,7);S.get("/transactions",{month:s})},H=()=>{const e=new Date(g.value+"-01");e.setMonth(e.getMonth()+1);const s=e.toISOString().slice(0,7);S.get("/transactions",{month:s})},O=e=>{m.value=e,_()},q=()=>{m.value="",n.value={account_ids:[],category_ids:[],type:"both",flags:[],tag_ids:[],amount_min:void 0,amount_max:void 0}},z=(e,s)=>{switch(e){case"view":b("Fitur lihat detail akan segera hadir");break;case"edit":b("Fitur edit transaksi akan segera hadir");break;case"delete":A("Fitur hapus transaksi akan segera hadir");break}};function E(e){return new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}return Q(()=>n.value,e=>{},{deep:!0}),R(()=>{}),(e,s)=>(i(),w(J,{showHeader:!1,showFab:!1,containerClass:"px-0 mb-20"},{default:C(()=>[o(a(U),{title:e.pageTitle},null,8,["title"]),t("div",nt,[t("div",it,[t("div",rt,[t("h1",lt,r(e.pageTitle),1),t("p",dt,r(f.value),1)]),t("div",ct,[t("button",{onClick:L,class:"p-3 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Cari"},[o(a(Z),{class:"w-5 h-5"})]),t("button",{onClick:N,class:v([u.value?"bg-white/30 ring-2 ring-white/50":"bg-white/20 hover:bg-white/30","p-3 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center relative"]),title:"Filter"},[o(a(tt),{class:"w-5 h-5"}),u.value?(i(),d("div",mt)):h("",!0)],2)])]),t("div",ut,[t("button",{onClick:V,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[o(a(et),{class:"w-5 h-5"})]),t("div",ht,[o(a(T),{class:"w-4 h-4"}),t("span",pt,r(f.value),1)]),t("button",{onClick:H,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[o(a(at),{class:"w-5 h-5"})])]),t("div",xt,[t("div",gt,[o(a(st),{class:"w-4 h-4 text-white mx-auto mb-1"}),s[0]||(s[0]=t("p",{class:"text-xs text-white/70 mb-1"},"Masuk",-1)),t("p",ft,r(a(p)(e.transactions.summary.total_income,"decimal")),1)]),t("div",wt,[o(a(ot),{class:"w-4 h-4 text-white mx-auto mb-1"}),s[1]||(s[1]=t("p",{class:"text-xs text-white/70 mb-1"},"Keluar",-1)),t("p",vt,r(a(p)(e.transactions.summary.total_expense,"decimal")),1)]),t("div",bt,[o(a(D),{class:"w-4 h-4 text-white mx-auto mb-1"}),s[2]||(s[2]=t("p",{class:"text-xs text-white/70 mb-1"},"Selisih",-1)),t("p",{class:v(["text-sm font-bold",e.transactions.summary.net_amount>=0?"text-white":"text-coral-200"])},r(a(p)(e.transactions.summary.net_amount,"decimal")),3)])])]),t("div",_t,[(i(!0),d(F,null,M(e.transactions.data,c=>(i(),d("div",{key:c.date,class:"bg-white dark:bg-gray-800 shadow-md border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden mb-4"},[t("div",yt,[t("div",kt,[t("div",Ct,[o(a(T),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),t("span",Ft,r(E(c.date)),1)]),t("div",Mt,[t("span",{class:v(["text-sm font-semibold",c.amount>=0?"text-teal-600 dark:text-teal-400":"text-coral-600 dark:text-coral-400"])},r(a(p)(c.amount,"currency")),3)])])]),t("div",St,[(i(!0),d(F,null,M(c.transactions,y=>(i(),w(Y,{key:y.id,transaction:y,onAction:z},null,8,["transaction"]))),128))])]))),128)),e.transactions.data.length===0?(i(),d("div",Tt,[t("div",Dt,[o(a(D),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),s[3]||(s[3]=t("p",{class:"text-lg font-medium"},"Tidak ada transaksi",-1)),t("p",jt,r(u.value?"Tidak ada transaksi yang sesuai dengan filter yang dipilih":`Belum ada transaksi di ${f.value}`),1)]),t("div",It,[u.value?(i(),d("button",{key:0,onClick:q,class:"w-full py-3 text-teal-600 border border-teal-600 rounded-xl hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-colors duration-200 font-medium"}," Hapus Filter ")):h("",!0),o(a($),{href:"/transactions/create",class:"w-full py-3 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors duration-200 font-medium text-center"},{default:C(()=>s[4]||(s[4]=[G(" Tambah Transaksi ",-1)])),_:1,__:[4]})])])):h("",!0)]),x.value?(i(),w(X,{key:0,"initial-query":m.value,onApply:O,onClose:_},null,8,["initial-query"])):h("",!0)]),_:1}))}});export{re as default};
