import{d as Y,m as Z,z as v,P as $,c as j,H as tt,h as b,o as r,w as I,f as i,e as a,a as d,b as m,u as n,j as et,t as c,g as _,F as g,r as x,l as at,k as st,B as ot}from"./app-Bbr4huxm.js";import{F as nt}from"./FinancialAppLayout-BkYH5qmy.js";import{u as rt}from"./useTranslation-erLI63mb.js";import{f as h}from"./formatCurrency-6zMsDc4Z.js";import lt from"./SearchModal-Bq2d_RWM.js";import it from"./FilterModal-owGUtGDP.js";import dt from"./TransactionCard-B-kxqLkY.js";import{S as O}from"./search-CF7_iZAE.js";import{F as ct}from"./filter-t7AkqOSA.js";import{C as ut}from"./chevron-left-BWe33LPk.js";import{C as B}from"./calendar-BJPJ9wBg.js";import{C as mt}from"./chevron-right-ue8LWwN2.js";import{T as ht}from"./trending-up--P5T4r3s.js";import{T as pt}from"./trending-down-CPz2tXkf.js";import{D as F}from"./dollar-sign-Cd1QaVMj.js";import{X as f}from"./x-z6JbmtOv.js";import{_ as gt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useDarkMode-BOxaEozd.js";import"./createLucideIcon-VamSCHgF.js";import"./settings-i7Q4eGTB.js";import"./sun-8QlyPjgC.js";import"./rotate-ccw-CJsPGBIG.js";import"./credit-card-C3oAvuZJ.js";import"./folder-open-C0tC6qyF.js";import"./tag-zxE92EqY.js";import"./receipt-BRbIXCya.js";import"./arrow-right-left-DybWfySR.js";import"./trash-2-WqxnbzQr.js";import"./eye-F0uotoGY.js";import"./square-pen-gG2lHZe9.js";const xt={class:"bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-b-[24px] px-4 pt-4 pb-6 mb-4 shadow-lg dark:shadow-2xl"},ft={class:"flex items-center justify-between mb-4"},vt={class:"flex-1 min-w-0"},bt={class:"text-xl font-semibold text-white truncate"},_t={class:"text-sm text-teal-100 dark:text-teal-200 truncate"},wt={class:"flex items-center gap-2 ml-3"},kt={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full"},yt={class:"mb-4"},Ct={class:"flex overflow-x-auto pb-2 -mx-4 px-4 gap-2 scrollbar-hide"},Ft=["onClick"],St={key:0,class:"flex items-center justify-between mb-4 bg-white/10 rounded-xl p-3"},Mt={class:"flex items-center gap-2 text-white"},At={class:"font-medium"},Dt={class:"grid grid-cols-3 gap-3"},Tt={class:"bg-white/10 rounded-xl p-3 text-center"},$t={class:"text-sm font-bold text-white"},jt={class:"bg-white/10 rounded-xl p-3 text-center"},It={class:"text-sm font-bold text-white"},Ot={class:"bg-white/10 rounded-xl p-3 text-center"},Bt={key:0,class:"px-4 mb-4"},Lt={class:"flex flex-wrap gap-2"},Ht={key:0,class:"flex items-center gap-1 px-3 py-1 bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 rounded-full text-sm"},Pt={key:1,class:"flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm"},Nt=["onClick"],Vt=["onClick"],qt={key:2,class:"flex items-center gap-1 px-3 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full text-sm"},Et={class:"px-2"},zt={class:"bg-gray-50 dark:bg-gray-700/50 px-4 py-3 border-b border-gray-200 dark:border-gray-700"},Gt={class:"flex items-center justify-between"},Kt={class:"flex items-center gap-2"},Rt={class:"text-sm font-medium text-gray-900 dark:text-white"},Ut={class:"text-right"},Wt={class:"divide-y divide-gray-100 dark:divide-gray-700"},Xt={key:0,class:"text-center py-12 px-4"},Jt={class:"text-gray-400 mb-6"},Qt={class:"text-sm text-gray-500 mt-1"},Yt={class:"flex flex-col gap-3"},Zt=Y({__name:"Index",props:{transactions:{},pageTitle:{}},setup(L){const S=L;rt();const{success:te,error:H,warning:P,info:M}=Z(),w=v(!1),k=v(!1),y=v(!1),s=v({...S.transactions.filters});$(()=>S.transactions.filters,t=>{s.value={...t}},{immediate:!0,deep:!0});const A=j(()=>{const t=s.value.period||"month";if(t==="today")return"Hari Ini";if(t==="week")return"Minggu Ini";if(t==="year")return"Tahun Ini";if(t==="all")return"Semua Waktu";if(t==="month"){const e=s.value.month||new Date().toISOString().slice(0,7);return new Date(e+"-01").toLocaleDateString("id-ID",{month:"long",year:"numeric"})}return t==="custom"&&s.value.date_from&&s.value.date_to?`${s.value.date_from} - ${s.value.date_to}`:"Filter Aktif"}),p=j(()=>{const t=s.value;return!!(t.search||t.account_ids&&t.account_ids.length>0||t.category_ids&&t.category_ids.length>0||t.tag_ids&&t.tag_ids.length>0||t.flags&&t.flags.length>0||t.type!=="both"||t.amount_min||t.amount_max||t.period!=="month")}),N=()=>{k.value=!0},D=()=>{k.value=!1},V=()=>{y.value=!0},q=()=>{y.value=!1},E=()=>{const t=s.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()-1);const o=e.toISOString().slice(0,7);u({...s.value,month:o,period:"month"})},z=()=>{const t=s.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()+1);const o=e.toISOString().slice(0,7);u({...s.value,month:o,period:"month"})},G=t=>{u({...s.value,search:t}),D()},u=t=>{w.value=!0;const e=Object.fromEntries(Object.entries(t).filter(([o,l])=>Array.isArray(l)?l.length>0:l!=null&&l!==""));ot.get("/transactions",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1},onError:()=>{H("Gagal memuat data transaksi"),w.value=!1}})},T=()=>{u({period:"month",month:new Date().toISOString().slice(0,7),type:"both"})},K=t=>{u({...s.value,period:t})},R=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),C=t=>{const e={...s.value};t==="search"?delete e.search:t==="type"?e.type="both":t==="amount"&&(delete e.amount_min,delete e.amount_max),u(e)},U=t=>{const e={...s.value};e.account_ids=(e.account_ids||[]).filter(o=>o!==t),u(e)},W=t=>{const e={...s.value};e.category_ids=(e.category_ids||[]).filter(o=>o!==t),u(e)},X=t=>{const e=s.value.account_ids||[],o=e.includes(t)?e.filter(l=>l!==t):[...e,t];u({...s.value,account_ids:o})},J=t=>{const e=s.value.category_ids||[],o=e.includes(t)?e.filter(l=>l!==t):[...e,t];u({...s.value,category_ids:o})},Q=(t,e)=>{switch(t){case"view":M("Fitur lihat detail akan segera hadir");break;case"edit":M("Fitur edit transaksi akan segera hadir");break;case"delete":P("Fitur hapus transaksi akan segera hadir");break}};return $(()=>s.value,t=>{},{deep:!0}),tt(()=>{}),(t,e)=>(r(),b(nt,{showHeader:!1,showFab:!1,containerClass:"px-0 pb-32"},{default:I(()=>[i(n(et),{title:t.pageTitle},null,8,["title"]),a("div",xt,[a("div",ft,[a("div",vt,[a("h1",bt,c(t.pageTitle),1),a("p",_t,c(A.value),1)]),a("div",wt,[a("button",{onClick:N,class:"p-3 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Cari"},[i(n(O),{class:"w-5 h-5"})]),a("button",{onClick:V,class:_([p.value?"bg-white/30 ring-2 ring-white/50":"bg-white/20 hover:bg-white/30","p-3 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center relative"]),title:"Filter"},[i(n(ct),{class:"w-5 h-5"}),p.value?(r(),d("div",kt)):m("",!0)],2)])]),a("div",yt,[a("div",Ct,[(r(!0),d(g,null,x(t.transactions.master_data.period_options,o=>(r(),d("button",{key:o.value,onClick:l=>K(o.value),class:_(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 whitespace-nowrap min-h-[36px]",s.value.period===o.value||!s.value.period&&o.value==="month"?"bg-white text-teal-600 shadow-md":"bg-white/20 text-white hover:bg-white/30"])},c(o.label),11,Ft))),128))])]),(s.value.period||"month")==="month"?(r(),d("div",St,[a("button",{onClick:E,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[i(n(ut),{class:"w-5 h-5"})]),a("div",Mt,[i(n(B),{class:"w-4 h-4"}),a("span",At,c(A.value),1)]),a("button",{onClick:z,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[i(n(mt),{class:"w-5 h-5"})])])):m("",!0),a("div",Dt,[a("div",Tt,[i(n(ht),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[3]||(e[3]=a("p",{class:"text-xs text-white/70 mb-1"},"Masuk",-1)),a("p",$t,c(n(h)(t.transactions.summary.total_income,"decimal")),1)]),a("div",jt,[i(n(pt),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[4]||(e[4]=a("p",{class:"text-xs text-white/70 mb-1"},"Keluar",-1)),a("p",It,c(n(h)(t.transactions.summary.total_expense,"decimal")),1)]),a("div",Ot,[i(n(F),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[5]||(e[5]=a("p",{class:"text-xs text-white/70 mb-1"},"Selisih",-1)),a("p",{class:_(["text-sm font-bold",t.transactions.summary.net_amount>=0?"text-white":"text-coral-200"])},c(n(h)(t.transactions.summary.net_amount,"decimal")),3)])])]),p.value?(r(),d("div",Bt,[a("div",{class:"flex items-center gap-2 mb-2"},[e[6]||(e[6]=a("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Filter Aktif:",-1)),a("button",{onClick:T,class:"text-xs text-teal-600 hover:text-teal-700 font-medium"}," Hapus Semua ")]),a("div",Lt,[s.value.search?(r(),d("div",Ht,[i(n(O),{class:"w-3 h-3"}),a("span",null,c(s.value.search),1),a("button",{onClick:e[0]||(e[0]=o=>C("search")),class:"ml-1 hover:bg-teal-200 dark:hover:bg-teal-800 rounded-full p-0.5"},[i(n(f),{class:"w-3 h-3"})])])):m("",!0),s.value.type&&s.value.type!=="both"?(r(),d("div",Pt,[a("span",null,c(s.value.type==="income"?"Pemasukan":"Pengeluaran"),1),a("button",{onClick:e[1]||(e[1]=o=>C("type")),class:"ml-1 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5"},[i(n(f),{class:"w-3 h-3"})])])):m("",!0),(r(!0),d(g,null,x(s.value.account_ids||[],o=>(r(),d("div",{key:`account-${o}`,class:"flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm"},[a("span",null,c(t.transactions.master_data.accounts.find(l=>l.id===o)?.name||`Account ${o}`),1),a("button",{onClick:l=>U(o),class:"ml-1 hover:bg-green-200 dark:hover:bg-green-800 rounded-full p-0.5"},[i(n(f),{class:"w-3 h-3"})],8,Nt)]))),128)),(r(!0),d(g,null,x(s.value.category_ids||[],o=>(r(),d("div",{key:`category-${o}`,class:"flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm"},[a("span",null,c([...t.transactions.master_data.income_categories,...t.transactions.master_data.expense_categories].find(l=>l.id===o)?.name||`Category ${o}`),1),a("button",{onClick:l=>W(o),class:"ml-1 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-full p-0.5"},[i(n(f),{class:"w-3 h-3"})],8,Vt)]))),128)),s.value.amount_min||s.value.amount_max?(r(),d("div",qt,[i(n(F),{class:"w-3 h-3"}),a("span",null,c(s.value.amount_min?n(h)(s.value.amount_min,"decimal"):"0")+" - "+c(s.value.amount_max?n(h)(s.value.amount_max,"decimal"):"∞"),1),a("button",{onClick:e[2]||(e[2]=o=>C("amount")),class:"ml-1 hover:bg-orange-200 dark:hover:bg-orange-800 rounded-full p-0.5"},[i(n(f),{class:"w-3 h-3"})])])):m("",!0)])])):m("",!0),a("div",Et,[(r(!0),d(g,null,x(t.transactions.data,o=>(r(),d("div",{key:o.date,class:"bg-white dark:bg-gray-800 shadow-md border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden mb-4"},[a("div",zt,[a("div",Gt,[a("div",Kt,[i(n(B),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",Rt,c(R(o.date)),1)]),a("div",Ut,[a("span",{class:_(["text-sm font-semibold",o.amount>=0?"text-teal-600 dark:text-teal-400":"text-coral-600 dark:text-coral-400"])},c(n(h)(o.amount,"currency")),3)])])]),a("div",Wt,[(r(!0),d(g,null,x(o.transactions,l=>(r(),b(dt,{key:l.id,transaction:l,onAction:Q,onAccountClick:X,onCategoryClick:J},null,8,["transaction"]))),128))])]))),128)),t.transactions.data.length===0?(r(),d("div",Xt,[a("div",Jt,[i(n(F),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),e[7]||(e[7]=a("p",{class:"text-lg font-medium"},"Tidak ada transaksi",-1)),a("p",Qt,c(p.value?"Tidak ada transaksi yang sesuai dengan filter yang dipilih":`Belum ada transaksi di ${t.currentMonthLabel}`),1)]),a("div",Yt,[p.value?(r(),d("button",{key:0,onClick:T,class:"w-full py-3 text-teal-600 border border-teal-600 rounded-xl hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-colors duration-200 font-medium"}," Hapus Filter ")):m("",!0),i(n(at),{href:"/transactions/create",class:"w-full py-3 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors duration-200 font-medium text-center"},{default:I(()=>e[8]||(e[8]=[st(" Tambah Transaksi ",-1)])),_:1,__:[8]})])])):m("",!0)]),k.value?(r(),b(lt,{key:1,"initial-query":s.value.search||"",onApply:G,onClose:D},null,8,["initial-query"])):m("",!0),y.value?(r(),b(it,{key:2,filters:s.value,"master-data":t.transactions.master_data,onApply:u,onClose:q},null,8,["filters","master-data"])):m("",!0)]),_:1}))}}),$e=gt(Zt,[["__scopeId","data-v-71a5895c"]]);export{$e as default};
