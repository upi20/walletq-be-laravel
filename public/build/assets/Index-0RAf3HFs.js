import{d as I,m as R,p as W,z as d,A as X,c as Y,h as v,o as l,w as f,f as o,e,a as i,b as p,u as s,j as Z,l as k,k as x,s as S,v as F,x as ee,y as te,F as ae,r as re,g as K,i as se,t as M,B as j}from"./app-CjXyzFP-.js";import{P as A,F as oe}from"./FinancialAppLayout-CsSPB_jJ.js";import{u as le}from"./useTranslation-C7qEGAQq.js";import{_ as ne}from"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-DQfGiwEw.js";import{A as ie}from"./arrow-left-BC5qEcFk.js";import{T as B}from"./tag-4X57dsfM.js";import{S as de}from"./search-x4cTZsnJ.js";import{C as ce}from"./chevron-up-BZ8NFwzF.js";import{C as ue}from"./chevron-down-Bv1Jms5v.js";import{C as ge}from"./check-CKCKHXI9.js";import{E as me}from"./ellipsis-vertical-CnwaGtNB.js";import{S as fe}from"./square-pen-BWuo0aZn.js";import{T as pe}from"./trash-2-IvgbGUro.js";import{F as xe}from"./filter-CBvmpu_x.js";import{T as he}from"./trending-up-BAyEQQVh.js";import{T as be}from"./trending-down-DE2iJo1a.js";import"./useDarkMode-4slgDS6C.js";import"./formatCurrency-6zMsDc4Z.js";import"./createLucideIcon-CbON2GJz.js";import"./x-CsK6C5Zp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./settings-DlxXLXd7.js";import"./sun-pCoAKETw.js";const ve={class:"mb-1"},ke={class:"flex items-center justify-between mb-4"},ye={class:"flex items-center gap-2"},we={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},_e={class:"flex items-center gap-3 mb-2"},Ce={class:"w-10 h-10 bg-gradient-to-r from-teal-500 to-coral-500 rounded-xl flex items-center justify-center"},Te={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6 mt-5"},Se={class:"flex flex-col sm:flex-row gap-4"},Fe={class:"flex items-center gap-2"},Ke={class:"flex items-center bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden"},Me={key:1,class:"text-center py-16"},je={class:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6"},Ae={key:2,class:"text-center py-12"},Be={key:3,class:"grid grid-cols-1 gap-3 mb-20"},Pe={class:"flex items-start justify-between"},$e=["onClick"],De={class:"w-8 h-8 bg-gradient-to-r from-teal-100 to-coral-100 dark:from-teal-900 dark:to-coral-900 rounded-md flex items-center justify-center"},Ee={class:"font-semibold text-gray-900 dark:text-white group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors"},Ve={class:"flex items-center gap-2 mb-1"},Le={key:0,class:"text-xs px-2 py-1 rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},Ne={key:1,class:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"},Ue={class:"relative"},ze=["onClick"],He={key:0,class:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10"},Oe=["onClick","disabled"],ht=I({__name:"Index",props:{categories:{},filters:{}},setup(P){const h=P;le();const{success:$,error:D,warning:qe,info:Ge}=R(),{confirmDelete:E,confirmAction:Je,alert:Qe}=W(),b=d(null),V=a=>{b.value=b.value===a?null:a},y=d(h.filters.search||""),w=d(h.filters.type||""),_=d(!1),L=()=>{_.value=!_.value};let n=null;const N=a=>{if(a.key==="Enter"){n&&(clearTimeout(n),n=null),g();return}n&&clearTimeout(n),n=setTimeout(()=>{g(),n=null},500)};X(()=>{n&&(clearTimeout(n),n=null)});const u=d("name"),c=d("asc"),C=Y(()=>Array.isArray(h.categories.data)?h.categories.data.slice():[]),g=()=>{j.get("/settings/transaction-categories",{search:y.value,type:w.value,sortField:u.value,sortOrder:c.value},{preserveState:!0,preserveScroll:!0,only:["categories"]})},U=a=>{u.value===a?c.value=c.value==="asc"?"desc":"asc":(u.value=a,c.value="asc"),g()},z=async a=>{await E(a.name)&&j.delete(`/settings/transaction-categories/${a.id}`,{onStart:()=>{},onSuccess:()=>{$("Kategori berhasil dihapus!",{message:`Kategori "${a.name}" telah dihapus dari sistem.`,duration:5e3})},onError:()=>{D("Gagal menghapus kategori",{message:"Terjadi kesalahan saat menghapus kategori. Silakan coba lagi.",persistent:!0})}})};document.addEventListener("click",a=>{a.target.closest(".group")||(b.value=null)});const m=d([]),H=a=>{m.value.includes(a)?m.value=m.value.filter(t=>t!==a):m.value.push(a)},O=a=>m.value.includes(a),q=a=>({income:"Pemasukan",expense:"Pengeluaran"})[a]||a,G=a=>({income:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",expense:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"})[a]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",J=a=>a==="income"?he:be;return(a,t)=>(l(),v(oe,{showHeader:!1,showFab:!1,containerClass:"px-3 pt-6 pb-32"},{default:f(()=>[o(s(Z),{title:"Kategori Transaksi"}),e("div",ve,[e("div",ke,[o(s(k),{href:"/settings",class:"inline-flex items-center text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300 transition-colors"},{default:f(()=>[o(s(ie),{class:"w-4 h-4 mr-2"}),t[3]||(t[3]=x(" Kembali ke Pengaturan ",-1))]),_:1,__:[3]}),e("div",ye,[o(ne)])]),e("div",we,[e("div",null,[e("div",_e,[e("div",Ce,[o(s(B),{class:"w-5 h-5 text-white"})]),t[4]||(t[4]=e("div",null,[e("h1",{class:"text-1xl font-bold bg-gradient-to-r from-teal-600 to-coral-600 bg-clip-text text-transparent"}," Kategori Transaksi "),e("h3",{class:"text-xs"}," Kelola kategori untuk mengorganisir transaksi Anda ")],-1))])])])]),_.value?(l(),i("div",Te,[e("div",Se,[e("form",{class:"relative flex-1",onSubmit:S(g,["prevent"])},[o(s(de),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>y.value=r),type:"search",placeholder:"Cari kategori transaksi...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent",onKeyup:N},null,544),[[ee,y.value]])],32),e("div",Fe,[F(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>w.value=r),onChange:g,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent"},t[5]||(t[5]=[e("option",{value:""},"Semua Jenis",-1),e("option",{value:"income"},"Pemasukan",-1),e("option",{value:"expense"},"Pengeluaran",-1)]),544),[[te,w.value]]),e("div",Ke,[e("button",{onClick:t[2]||(t[2]=S(r=>U("name"),["prevent"])),class:"px-3 py-2 text-sm flex items-center gap-2"},[t[6]||(t[6]=x(" Nama ",-1)),u.value==="name"&&c.value==="asc"?(l(),v(s(ce),{key:0,class:"w-4 h-4"})):u.value==="name"&&c.value==="desc"?(l(),v(s(ue),{key:1,class:"w-4 h-4"})):p("",!0)])])])])])):p("",!0),a.categories.data.length===0?(l(),i("div",Me,[e("div",je,[o(s(B),{class:"w-12 h-12 text-gray-400"})]),t[8]||(t[8]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Belum ada kategori transaksi",-1)),t[9]||(t[9]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"},"Mulai dengan menambahkan kategori transaksi pertama Anda",-1)),o(s(k),{href:"/settings/transaction-categories/create",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-teal-600 to-coral-600 text-white rounded-xl font-medium hover:from-teal-700 hover:to-coral-700 transition-all duration-200"},{default:f(()=>[o(s(A),{class:"w-5 h-5 mr-2"}),t[7]||(t[7]=x(" Tambah Kategori ",-1))]),_:1,__:[7]})])):C.value.length===0?(l(),i("div",Ae,t[10]||(t[10]=[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Tidak ada hasil",-1),e("p",{class:"text-gray-600 dark:text-gray-400"},"Coba ubah kata kunci pencarian atau filter Anda",-1)]))):(l(),i("div",Be,[(l(!0),i(ae,null,re(C.value,(r,Q)=>(l(),i("div",{key:r.id,class:K(["group rounded-xl p-4 shadow-sm border transition-all duration-300",Q%2===0?"bg-white dark:bg-gray-800 border-none hover:shadow-lg hover:shadow-teal-500/10":"bg-teal-50 dark:bg-teal-900/20 border-none hover:shadow-lg hover:shadow-coral-500/10"])},[e("div",Pe,[e("div",{class:"flex items-center gap-3",onClick:T=>H(r.id)},[e("div",De,[(l(),v(se(O(r.id)?s(ge):J(r.type)),{class:"w-6 h-6 text-teal-600 dark:text-teal-400"}))]),e("div",null,[e("h3",Ee,M(r.name),1),e("div",Ve,[e("span",{class:K(["text-xs px-2 py-1 rounded-full",G(r.type)])},M(q(r.type)),3),r.is_default?(l(),i("span",Le," Default ")):p("",!0),r.is_hide?(l(),i("span",Ne," Tersembunyi ")):p("",!0)])])],8,$e),e("div",Ue,[e("button",{class:"w-8 h-8 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",onClick:T=>V(r.id)},[o(s(me),{class:"w-4 h-4 text-gray-400"})],8,ze),b.value===r.id?(l(),i("div",He,[o(s(k),{href:`/settings/transaction-categories/${r.id}/edit`,class:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"},{default:f(()=>[o(s(fe),{class:"w-4 h-4 mr-3"}),t[11]||(t[11]=x(" Edit Kategori ",-1))]),_:2,__:[11]},1032,["href"]),e("button",{onClick:T=>z(r),class:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",disabled:r.is_default},[o(s(pe),{class:"w-4 h-4 mr-3"}),t[12]||(t[12]=x(" Hapus Kategori ",-1))],8,Oe)])):p("",!0)])])],2))),128))])),e("button",{onClick:L,class:"fixed bottom-20 left-6 w-14 h-14 bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-105 active:scale-95"},[o(s(xe),{class:"w-6 h-6 text-white"})]),o(s(k),{href:"/settings/transaction-categories/create",title:"Tambah Kategori",class:"fixed bottom-20 right-6 w-14 h-14 bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-105 active:scale-95"},{default:f(()=>[o(s(A),{class:"w-6 h-6 text-white"})]),_:1})]),_:1}))}});export{ht as default};
