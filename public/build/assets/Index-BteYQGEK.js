import{d as M,m as V,z as b,c as k,P as q,H,h as S,o as i,w as x,f as o,e as a,u as n,j as N,t as c,l as P,b as _,a as p,v as z,x as G,g as A,F as O,r as Q,k as R,B as j}from"./app-Dzrympp2.js";import{P as U,F as J}from"./FinancialAppLayout-B5vzb7cB.js";import{u as K}from"./useTranslation-DttcRy_s.js";import W from"./FilterPanel-CWM-kr30.js";import X from"./SummaryCards-CMc4-btX.js";import Y from"./TransactionTable-B1I_7g_f.js";import Z from"./QuickFilters-BPrTKm_2.js";import{c as B}from"./createLucideIcon-B7qgmNWB.js";import{S as tt}from"./search-0SeMUjJz.js";import{F as et}from"./filter-Ba4pT2Ca.js";import{C as at}from"./chevron-right-BxzvEgMV.js";import{D as rt}from"./dollar-sign-DKpR5NFY.js";import"./useDarkMode-CkP6TPWS.js";import"./formatCurrency-Dui6J3Fs.js";import"./x-Cwser7SP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./trending-up-QBLhiNbZ.js";import"./settings-xGOIUGJa.js";import"./sun-CBlj6mSL.js";import"./calendar-9mxTvl9T.js";import"./credit-card-Bnda4ukQ.js";import"./folder-open-dvtushuM.js";import"./tag-BoXurSex.js";import"./trending-down-C5sgIuAd.js";import"./trash-2-CULtE1RG.js";import"./eye-B2xhabxC.js";import"./square-pen-D09qPq2V.js";import"./chevron-down-VBjjYNFq.js";import"./arrow-right-left-D_FdYrRT.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=B("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=B("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),nt={class:"bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-b-[32px] px-6 pt-6 pb-8 mb-6 shadow-lg dark:shadow-2xl"},lt={class:"flex items-center justify-between mb-6"},it={class:"text-2xl font-semibold text-white"},dt={class:"text-teal-100 dark:text-teal-200"},ut={class:"flex items-center gap-3"},ct=["disabled"],pt={class:"px-6"},gt={class:"flex flex-col sm:flex-row gap-4 mb-6"},mt={class:"flex-1 flex gap-3"},bt={class:"relative flex-1"},vt={key:0,class:"w-2 h-2 bg-teal-500 rounded-full"},ft={class:"mb-6"},yt={key:1,class:"flex items-center justify-between"},ht={class:"text-sm text-gray-600 dark:text-gray-400"},kt={class:"flex items-center gap-2"},xt=["disabled"],_t={class:"flex items-center gap-1"},wt=["onClick"],Ft=["disabled"],Ct={key:2,class:"text-center py-12"},Tt={class:"text-gray-400 mb-4"},St={class:"flex justify-center gap-4"},re=M({__name:"Index",props:{transactions:{},pageTitle:{}},setup(D){const v=D;K();const{success:I,error:w,warning:$,info:F}=V(),l=b(!1),g=b(!1),C=b([]),s=b({...v.transactions.filters}),f=k(()=>{const t=s.value;return!!(t.search||t.date_from||t.date_to||t.account_ids&&t.account_ids.length>0||t.category_ids&&t.category_ids.length>0||t.tag_ids&&t.tag_ids.length>0||t.type!=="both"||t.flags&&t.flags.length>0||t.amount_min||t.amount_max)}),y=k(()=>v.transactions.meta.last_page),m=k(()=>v.transactions.meta.current_page),d=t=>{l.value=!0;const e=Object.fromEntries(Object.entries(t).filter(([r,u])=>Array.isArray(u)?u.length>0:u!=null&&u!==""));j.get("/transactions/data",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s.value={...e},l.value=!1},onError:()=>{w("Gagal memuat data transaksi"),l.value=!1}})},T=()=>{d({type:"both",sort_by:"date",sort_order:"desc",per_page:25,page:1}),g.value=!1},h=t=>{t>=1&&t<=y.value&&d({...s.value,page:t})},E=()=>{l.value=!0,j.get("/transactions/export",s.value,{onSuccess:()=>{I("Export berhasil diunduh"),l.value=!1},onError:()=>{w("Gagal mengekspor data"),l.value=!1}})},L=(t,e)=>{switch(t){case"view":F("Fitur lihat detail akan segera hadir");break;case"edit":F("Fitur edit transaksi akan segera hadir");break;case"delete":$("Fitur hapus transaksi akan segera hadir");break}};return q(()=>s.value,t=>{},{deep:!0}),H(()=>{}),(t,e)=>(i(),S(J,{showHeader:!1,showFab:!1,containerClass:"px-0"},{default:x(()=>[o(n(N),{title:t.pageTitle},null,8,["title"]),a("div",nt,[a("div",lt,[a("div",null,[a("h1",it,c(t.pageTitle),1),a("p",dt,c(t.transactions.summary.period_label),1)]),a("div",ut,[a("button",{onClick:E,disabled:l.value,class:"p-3 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-colors duration-200"},[o(n(ot),{class:"w-5 h-5"})],8,ct),o(n(P),{href:"/transactions/create",class:"flex items-center gap-2 px-4 py-2 bg-white text-teal-600 rounded-xl font-medium hover:bg-teal-50 transition-colors duration-200"},{default:x(()=>[o(n(U),{class:"w-5 h-5"}),e[9]||(e[9]=a("span",null,"Tambah",-1))]),_:1,__:[9]})])]),o(X,{summary:t.transactions.summary,"quick-stats":t.transactions.quick_stats},null,8,["summary","quick-stats"])]),a("div",pt,[a("div",gt,[o(Z,{"current-preset":s.value.date_preset,onApplyPreset:e[0]||(e[0]=r=>d({...s.value,date_preset:r}))},null,8,["current-preset"]),a("div",mt,[a("div",bt,[o(n(tt),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),z(a("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.search=r),onInput:e[2]||(e[2]=r=>d(s.value)),type:"text",placeholder:"Cari transaksi...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-teal-500 focus:border-transparent"},null,544),[[G,s.value.search]])]),a("button",{onClick:e[3]||(e[3]=r=>g.value=!g.value),class:A(["flex items-center gap-2 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",{"ring-2 ring-teal-500 border-teal-500":f.value}])},[o(n(et),{class:"w-4 h-4"}),e[10]||(e[10]=a("span",null,"Filter",-1)),f.value?(i(),p("div",vt)):_("",!0)],2)])]),g.value?(i(),S(W,{key:0,filters:s.value,"master-data":t.transactions.master_data,loading:l.value,onApplyFilters:d,onClearFilters:T,onClose:e[4]||(e[4]=r=>g.value=!1),class:"mb-6"},null,8,["filters","master-data","loading"])):_("",!0),a("div",ft,[o(Y,{transactions:t.transactions.data,loading:l.value,"selected-transactions":C.value,"current-sort":{by:s.value.sort_by,order:s.value.sort_order},onSortChange:e[5]||(e[5]=r=>d({...s.value,...r})),onSelectionChange:e[6]||(e[6]=r=>C.value=r),onAction:L},null,8,["transactions","loading","selected-transactions","current-sort"])]),t.transactions.meta.total>0?(i(),p("div",yt,[a("div",ht," Menampilkan "+c(t.transactions.meta.from)+" - "+c(t.transactions.meta.to)+" dari "+c(t.transactions.meta.total)+" transaksi ",1),a("div",kt,[a("button",{onClick:e[7]||(e[7]=r=>h(m.value-1)),disabled:m.value<=1,class:"p-2 border border-gray-200 dark:border-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[o(n(st),{class:"w-4 h-4"})],8,xt),a("div",_t,[(i(!0),p(O,null,Q(Math.min(5,y.value),r=>(i(),p("button",{key:r,onClick:u=>h(r),class:A(["px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg transition-colors duration-200",r===m.value?"bg-teal-500 text-white border-teal-500":"hover:bg-gray-50 dark:hover:bg-gray-700"])},c(r),11,wt))),128))]),a("button",{onClick:e[8]||(e[8]=r=>h(m.value+1)),disabled:m.value>=y.value,class:"p-2 border border-gray-200 dark:border-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[o(n(at),{class:"w-4 h-4"})],8,Ft)])])):(i(),p("div",Ct,[a("div",Tt,[o(n(rt),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),e[11]||(e[11]=a("p",{class:"text-lg font-medium"},"Tidak ada transaksi",-1)),e[12]||(e[12]=a("p",{class:"text-sm"},"Belum ada transaksi yang sesuai dengan filter yang dipilih",-1))]),a("div",St,[f.value?(i(),p("button",{key:0,onClick:T,class:"px-4 py-2 text-teal-600 border border-teal-600 rounded-lg hover:bg-teal-50 transition-colors duration-200"}," Hapus Filter ")):_("",!0),o(n(P),{href:"/transactions/create",class:"px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors duration-200"},{default:x(()=>e[13]||(e[13]=[R(" Tambah Transaksi Pertama ",-1)])),_:1,__:[13]})])]))])]),_:1}))}});export{re as default};
