import{d as R,z as B,P as _,c as O,a as s,o as l,e,f as d,u as n,b as p,v as i,y as w,F as c,r as b,k as g,x,s as j,t as u,g as A}from"./app-CmB0XHNn.js";import{F as N}from"./filter-qSxTuXmS.js";import{R as $}from"./rotate-ccw-VB_aH90U.js";import{X as z}from"./x-BGVV61nB.js";import{C as I}from"./calendar-dBmuAvhJ.js";import{S as K}from"./search-CIIF2vqX.js";import{C as Y}from"./credit-card-DvX7iYzL.js";import{F as E}from"./folder-open-CQWloZdU.js";import{T as J}from"./tag-bn_MA13z.js";import{D as L}from"./dollar-sign-DqXLLuKc.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-CAqzBCnQ.js";const q={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg mx-auto border border-gray-200 dark:border-gray-700 max-h-[90vh] flex flex-col"},G={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0"},H={class:"flex items-center gap-2"},Q={class:"flex items-center gap-1"},W={class:"flex-1 overflow-y-auto p-4 space-y-5"},Z=["value"],ee={key:0},te={class:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},re={class:"space-y-3"},ae={key:1},oe={key:2},se={class:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},le=["value"],de={class:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},ne={class:"max-h-32 overflow-y-auto space-y-1 border border-gray-200 dark:border-gray-700 rounded-xl p-3"},ie=["checked","onChange"],ue={class:"flex-1 min-w-0"},ge={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},me={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},xe={key:0,class:"ml-1"},ye={class:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},ce={class:"max-h-32 overflow-y-auto space-y-1 border border-gray-200 dark:border-gray-700 rounded-xl p-3"},be=["checked","onChange"],pe={class:"flex-1"},fe={class:"text-sm text-gray-900 dark:text-white"},ke={class:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},ve={class:"max-h-24 overflow-y-auto space-y-1 border border-gray-200 dark:border-gray-700 rounded-xl p-3"},he=["checked","onChange"],_e={class:"text-sm text-gray-900 dark:text-white"},we={class:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},Ce={class:"space-y-3"},De={class:"grid grid-cols-1 gap-2"},Te=["checked","onChange"],Fe={class:"text-sm text-gray-900 dark:text-white"},Ve=R({__name:"FilterModal",props:{filters:{},masterData:{}},emits:["apply","close"],setup(C,{emit:D}){const y=C,f=D,a=B({period:"month",type:"both",account_ids:[],category_ids:[],tag_ids:[],flags:[],month:new Date().toISOString().slice(0,7),year:new Date().getFullYear().toString(),date_from:"",date_to:"",search:"",amount_min:void 0,amount_max:void 0,...y.filters});_(()=>y.filters,o=>{a.value={period:"month",type:"both",account_ids:[],category_ids:[],tag_ids:[],flags:[],month:new Date().toISOString().slice(0,7),year:new Date().getFullYear().toString(),date_from:"",date_to:"",search:"",amount_min:void 0,amount_max:void 0,...o}},{immediate:!0,deep:!0});const T=O(()=>a.value.type==="income"?y.masterData.income_categories:a.value.type==="expense"?y.masterData.expense_categories:[...y.masterData.income_categories,...y.masterData.expense_categories]),k=(o,t)=>o.indexOf(t)>-1?o.filter(m=>m!==t):[...o,t],F=(o,t)=>o.indexOf(t)>-1?o.filter(m=>m!==t):[...o,t],V=o=>{a.value.account_ids=k(a.value.account_ids||[],o)},S=o=>{a.value.category_ids=k(a.value.category_ids||[],o)},U=o=>{a.value.tag_ids=k(a.value.tag_ids||[],o)},M=o=>{a.value.flags=F(a.value.flags||[],o)},P=()=>{f("apply",{...a.value}),f("close")},h=()=>{a.value={account_ids:[],category_ids:[],type:"both",flags:[],tag_ids:[],amount_min:void 0,amount_max:void 0}},v=()=>{f("close")};return _(()=>a.value.type,()=>{a.value.category_ids=[]}),(o,t)=>(l(),s("div",{class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:j(v,["self"])},[e("div",q,[e("div",G,[e("div",H,[d(n(N),{class:"w-5 h-5 text-teal-600 dark:text-teal-400"}),t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Filter Transaksi",-1))]),e("div",Q,[e("button",{onClick:h,class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Reset filter"},[d(n($),{class:"w-4 h-4"})]),e("button",{onClick:v,class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[d(n(z),{class:"w-4 h-4"})])])]),e("div",W,[e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block"}," Periode ",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.value.period=r),class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},[(l(!0),s(c,null,b(o.masterData.period_options,r=>(l(),s("option",{key:r.value,value:r.value},u(r.label),9,Z))),128))],512),[[w,a.value.period]])]),a.value.period==="custom"?(l(),s("div",ee,[e("label",te,[d(n(I),{class:"w-4 h-4"}),t[11]||(t[11]=g(" Rentang Tanggal Kustom ",-1))]),e("div",re,[e("div",null,[t[12]||(t[12]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400 block mb-1"},"Dari Tanggal",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>a.value.date_from=r),type:"date",class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},null,512),[[x,a.value.date_from]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400 block mb-1"},"Sampai Tanggal",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.value.date_to=r),type:"date",class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},null,512),[[x,a.value.date_to]])])])])):p("",!0),a.value.period==="month"?(l(),s("div",ae,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block"}," Pilih Bulan ",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>a.value.month=r),type:"month",class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},null,512),[[x,a.value.month]])])):p("",!0),a.value.period==="year"?(l(),s("div",oe,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block"}," Pilih Tahun ",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.value.year=r),type:"number",min:"2020",max:"2030",class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},null,512),[[x,a.value.year]])])):p("",!0),e("div",null,[e("label",se,[d(n(K),{class:"w-4 h-4"}),t[16]||(t[16]=g(" Pencarian ",-1))]),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>a.value.search=r),type:"text",placeholder:"Cari di catatan, akun, atau kategori...",class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},null,512),[[x,a.value.search]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block"}," Tipe Transaksi ",-1)),i(e("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>a.value.type=r),class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},[(l(!0),s(c,null,b(o.masterData.type_options,r=>(l(),s("option",{key:r.value,value:r.value},u(r.label),9,le))),128))],512),[[w,a.value.type]])]),e("div",null,[e("label",de,[d(n(Y),{class:"w-4 h-4"}),t[18]||(t[18]=g(" Akun ",-1))]),e("div",ne,[(l(!0),s(c,null,b(o.masterData.accounts,r=>(l(),s("label",{key:r.id,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors duration-200"},[e("input",{type:"checkbox",checked:(a.value.account_ids||[]).includes(r.id),onChange:m=>V(r.id),class:"text-teal-600 border-gray-300 rounded focus:ring-teal-500 flex-shrink-0"},null,40,ie),e("div",ue,[e("div",ge,u(r.name),1),e("div",me,[g(u(r.formatted_balance)+" ",1),r.category?(l(),s("span",xe,"â€¢ "+u(r.category.name),1)):p("",!0)])])]))),128))])]),e("div",null,[e("label",ye,[d(n(E),{class:"w-4 h-4"}),t[19]||(t[19]=g(" Kategori ",-1))]),e("div",ce,[(l(!0),s(c,null,b(T.value,r=>(l(),s("label",{key:r.id,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors duration-200"},[e("input",{type:"checkbox",checked:(a.value.category_ids||[]).includes(r.id),onChange:m=>S(r.id),class:"text-teal-600 border-gray-300 rounded focus:ring-teal-500 flex-shrink-0"},null,40,be),e("div",pe,[e("div",fe,[g(u(r.name)+" ",1),e("span",{class:A(["ml-2 text-xs px-2 py-0.5 rounded-full",r.type==="income"?"bg-teal-100 text-teal-700 dark:bg-teal-900 dark:text-teal-300":"bg-coral-100 text-coral-700 dark:bg-coral-900 dark:text-coral-300"])},u(r.type==="income"?"Pemasukan":"Pengeluaran"),3)])])]))),128))])]),e("div",null,[e("label",ke,[d(n(J),{class:"w-4 h-4"}),t[20]||(t[20]=g(" Tag ",-1))]),e("div",ve,[(l(!0),s(c,null,b(o.masterData.tags,r=>(l(),s("label",{key:r.id,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors duration-200"},[e("input",{type:"checkbox",checked:(a.value.tag_ids||[]).includes(r.id),onChange:m=>U(r.id),class:"text-teal-600 border-gray-300 rounded focus:ring-teal-500 flex-shrink-0"},null,40,he),e("span",_e,u(r.name),1)]))),128))])]),e("div",null,[e("label",we,[d(n(L),{class:"w-4 h-4"}),t[21]||(t[21]=g(" Rentang Jumlah ",-1))]),e("div",Ce,[e("div",null,[t[22]||(t[22]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400 block mb-1"},"Minimal",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>a.value.amount_min=r),type:"number",min:"0",step:"1000",placeholder:"0",class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},null,512),[[x,a.value.amount_min,void 0,{number:!0}]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"text-xs text-gray-500 dark:text-gray-400 block mb-1"},"Maksimal",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>a.value.amount_max=r),type:"number",min:"0",step:"1000",placeholder:"Tidak terbatas",class:"w-full px-3 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"},null,512),[[x,a.value.amount_max,void 0,{number:!0}]])])])]),e("div",null,[t[24]||(t[24]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block"}," Status Transaksi ",-1)),e("div",De,[(l(!0),s(c,null,b(o.masterData.flag_options,r=>(l(),s("label",{key:r.value,class:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors duration-200"},[e("input",{type:"checkbox",checked:(a.value.flags||[]).includes(r.value),onChange:m=>M(r.value),class:"text-teal-600 border-gray-300 rounded focus:ring-teal-500 flex-shrink-0"},null,40,Te),e("span",Fe,u(r.label),1)]))),128))])])]),e("div",{class:"flex gap-3 p-4 border-t border-gray-200 dark:border-gray-700 flex-shrink-0"},[e("button",{onClick:h,class:"flex-1 py-3 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200 font-medium text-sm"}," Reset "),e("button",{onClick:v,class:"flex-1 py-3 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200 font-medium text-sm"}," Batal "),e("button",{onClick:P,class:"flex-1 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl hover:from-teal-600 hover:to-teal-700 transition-all duration-200 font-medium text-sm"}," Terapkan ")])])]))}}),Ie=X(Ve,[["__scopeId","data-v-7973d0ec"]]);export{Ie as default};
