import{d as nt,m as lt,z as b,P as j,c as F,H as it,h as _,o as n,w as M,f as i,e as s,a as d,b as m,u as r,j as dt,t as c,g as h,F as p,r as g,l as O,k as ct,B as L}from"./app-CjXyzFP-.js";import{P as ut,F as mt}from"./FinancialAppLayout-CsSPB_jJ.js";import{u as ht}from"./useTranslation-C7qEGAQq.js";import{f}from"./formatCurrency-6zMsDc4Z.js";import pt from"./SearchModal-DocJNP66.js";import gt from"./FilterModal-CLYHonK-.js";import ft from"./TransactionCard-Dy1lkRwF.js";import{S as P}from"./search-x4cTZsnJ.js";import{F as vt}from"./filter-CBvmpu_x.js";import{c as xt}from"./createLucideIcon-CbON2GJz.js";import{C as B}from"./calendar-CJWhaaLK.js";import{C as bt}from"./chevron-down-Bv1Jms5v.js";import{C as wt}from"./chevron-right-D2h-y9r_.js";import{T as _t}from"./trending-up-BAyEQQVh.js";import{T as yt}from"./trending-down-DE2iJo1a.js";import{D}from"./dollar-sign-Cu6YYwnJ.js";import{X as w}from"./x-CsK6C5Zp.js";import{_ as kt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useDarkMode-4slgDS6C.js";import"./settings-DlxXLXd7.js";import"./sun-pCoAKETw.js";import"./rotate-ccw-hq_9jsXN.js";import"./credit-card-DRwhehE2.js";import"./folder-open-Bvo5eF2W.js";import"./tag-4X57dsfM.js";import"./receipt-B0ADbpZo.js";import"./arrow-right-left-iTaSY6F4.js";import"./ellipsis-vertical-CnwaGtNB.js";import"./eye-BSmhmnHm.js";import"./square-pen-BWuo0aZn.js";import"./trash-2-IvgbGUro.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=xt("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),St={class:"bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-b-[24px] px-4 pt-4 pb-6 mb-4 shadow-lg dark:shadow-2xl"},Ft={class:"flex items-center justify-between mb-4"},Mt={class:"flex-1 min-w-0"},Dt={class:"text-xl font-semibold text-white truncate"},At={class:"text-sm text-teal-100 dark:text-teal-200 truncate"},$t={class:"flex items-center gap-2 ml-3"},Tt={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full"},It={class:"mb-4"},jt={class:"flex overflow-x-auto pb-2 -mx-4 px-4 gap-2 scrollbar-hide"},Ot=["onClick"],Lt={key:0,class:"flex items-center justify-between mb-4 bg-white/10 rounded-xl p-3"},Pt={class:"relative"},Bt={class:"font-medium"},Ht={key:0,class:"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-64 overflow-y-auto"},zt=["onClick"],Nt={class:"grid grid-cols-3 gap-3"},Vt={class:"bg-white/10 rounded-xl p-3 text-center"},qt={class:"text-sm font-bold text-white"},Et={class:"bg-white/10 rounded-xl p-3 text-center"},Gt={class:"text-sm font-bold text-white"},Kt={class:"bg-white/10 rounded-xl p-3 text-center"},Rt={key:0,class:"px-4 mb-4"},Ut={class:"flex flex-wrap gap-2"},Wt={key:0,class:"flex items-center gap-1 px-3 py-1 bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 rounded-full text-sm"},Xt={key:1,class:"flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm"},Yt=["onClick"],Jt=["onClick"],Qt={key:2,class:"flex items-center gap-1 px-3 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full text-sm"},Zt={class:"px-2"},te={class:"bg-gray-50/95 dark:bg-gray-700/95 px-4 py-3 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20 backdrop-blur-sm rounded-t-xl"},ee={class:"flex items-center justify-between"},ae={class:"flex items-center gap-2"},se={class:"text-sm font-medium text-gray-900 dark:text-white"},oe={class:"text-right"},re={class:"divide-y divide-gray-100 dark:divide-gray-700"},ne={key:0,class:"text-center py-12 px-4"},le={class:"text-gray-400 mb-6"},ie={class:"text-sm text-gray-500 mt-1"},de={class:"flex flex-col gap-3"},ce=nt({__name:"Index",props:{transactions:{},pageTitle:{}},setup(H){const A=H;ht();const{success:ue,error:z,warning:N,info:V}=lt(),y=b(!1),k=b(!1),C=b(!1),v=b(!1),o=b({...A.transactions.filters});j(()=>A.transactions.filters,t=>{o.value={...t}},{immediate:!0,deep:!0});const $=F(()=>{const t=o.value.period||"month";if(t==="today")return"Hari Ini";if(t==="week")return"Minggu Ini";if(t==="year")return"Tahun Ini";if(t==="all")return"Semua Waktu";if(t==="month"){const e=o.value.month||new Date().toISOString().slice(0,7);return new Date(e+"-01").toLocaleDateString("id-ID",{month:"long",year:"numeric"})}return t==="custom"&&o.value.date_from&&o.value.date_to?`${o.value.date_from} - ${o.value.date_to}`:"Filter Aktif"}),x=F(()=>{const t=o.value;return!!(t.search||t.account_ids&&t.account_ids.length>0||t.category_ids&&t.category_ids.length>0||t.tag_ids&&t.tag_ids.length>0||t.flags&&t.flags.length>0||t.type!=="both"||t.amount_min||t.amount_max||t.period!=="month")}),q=F(()=>{const t=[],e=new Date;for(let a=-12;a<=6;a++){const l=new Date(e.getFullYear(),e.getMonth()+a,1),ot=l.toISOString().slice(0,7),rt=l.toLocaleDateString("id-ID",{month:"long",year:"numeric"});t.push({value:ot,label:rt})}return t}),E=()=>{k.value=!0},T=()=>{k.value=!1},G=()=>{C.value=!0},K=()=>{C.value=!1},R=()=>{const t=o.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()-1);const a=e.toISOString().slice(0,7);u({...o.value,month:a,period:"month"})},U=()=>{const t=o.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()+1);const a=e.toISOString().slice(0,7);u({...o.value,month:a,period:"month"})},W=t=>{u({...o.value,search:t}),T()},u=t=>{y.value=!0;const e=Object.fromEntries(Object.entries(t).filter(([a,l])=>Array.isArray(l)?l.length>0:l!=null&&l!==""));L.get("/transactions",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{y.value=!1},onError:()=>{z("Gagal memuat data transaksi"),y.value=!1}})},I=()=>{u({period:"month",month:new Date().toISOString().slice(0,7),type:"both"})},X=t=>{u({...o.value,period:t})},Y=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),S=t=>{const e={...o.value};t==="search"?delete e.search:t==="type"?e.type="both":t==="amount"&&(delete e.amount_min,delete e.amount_max),u(e)},J=t=>{const e={...o.value};e.account_ids=(e.account_ids||[]).filter(a=>a!==t),u(e)},Q=t=>{const e={...o.value};e.category_ids=(e.category_ids||[]).filter(a=>a!==t),u(e)},Z=t=>{const e=o.value.account_ids||[],a=e.includes(t)?e.filter(l=>l!==t):[...e,t];u({...o.value,account_ids:a})},tt=t=>{const e=o.value.category_ids||[],a=e.includes(t)?e.filter(l=>l!==t):[...e,t];u({...o.value,category_ids:a})},et=(t,e)=>{switch(t){case"view":V("Fitur lihat detail akan segera hadir");break;case"edit":L.get(`/transactions/${e}/edit`);break;case"delete":N("Fitur hapus transaksi akan segera hadir");break}},at=()=>{v.value=!v.value},st=t=>{u({...o.value,month:t,period:"month"}),v.value=!1};return j(()=>o.value,t=>{},{deep:!0}),it(()=>{}),(t,e)=>(n(),_(mt,{showHeader:!1,showFab:!1,containerClass:"px-0 pb-32"},{default:M(()=>[i(r(dt),{title:t.pageTitle},null,8,["title"]),s("div",St,[s("div",Ft,[s("div",Mt,[s("h1",Dt,c(t.pageTitle),1),s("p",At,c($.value),1)]),s("div",$t,[s("button",{onClick:E,class:"p-3 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Cari"},[i(r(P),{class:"w-5 h-5"})]),s("button",{onClick:G,class:h([x.value?"bg-white/30 ring-2 ring-white/50":"bg-white/20 hover:bg-white/30","p-3 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center relative"]),title:"Filter"},[i(r(vt),{class:"w-5 h-5"}),x.value?(n(),d("div",Tt)):m("",!0)],2)])]),s("div",It,[s("div",jt,[(n(!0),d(p,null,g(t.transactions.master_data.period_options,a=>(n(),d("button",{key:a.value,onClick:l=>X(a.value),class:h(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 whitespace-nowrap min-h-[36px]",o.value.period===a.value||!o.value.period&&a.value==="month"?"bg-white text-teal-600 shadow-md":"bg-white/20 text-white hover:bg-white/30"])},c(a.label),11,Ot))),128))])]),(o.value.period||"month")==="month"?(n(),d("div",Lt,[s("button",{onClick:R,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[i(r(Ct),{class:"w-5 h-5"})]),s("div",Pt,[s("button",{onClick:at,class:"flex items-center gap-2 text-white cursor-pointer hover:bg-white/10 rounded-lg px-2 py-1 transition-colors duration-200"},[i(r(B),{class:"w-4 h-4"}),s("span",Bt,c($.value),1),i(r(bt),{class:h(["w-3 h-3 transition-transform duration-200",{"rotate-180":v.value}])},null,8,["class"])]),v.value?(n(),d("div",Ht,[(n(!0),d(p,null,g(q.value,a=>(n(),d("button",{key:a.value,onClick:l=>st(a.value),class:h(["w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-900 dark:text-white",{"bg-teal-50 dark:bg-teal-900/20 text-teal-600 dark:text-teal-400":a.value===(o.value.month||new Date().toISOString().slice(0,7))}])},c(a.label),11,zt))),128))])):m("",!0)]),s("button",{onClick:U,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[i(r(wt),{class:"w-5 h-5"})])])):m("",!0),s("div",Nt,[s("div",Vt,[i(r(_t),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[3]||(e[3]=s("p",{class:"text-xs text-white/70 mb-1"},"Masuk",-1)),s("p",qt,c(r(f)(t.transactions.summary.total_income,"decimal")),1)]),s("div",Et,[i(r(yt),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[4]||(e[4]=s("p",{class:"text-xs text-white/70 mb-1"},"Keluar",-1)),s("p",Gt,c(r(f)(t.transactions.summary.total_expense,"decimal")),1)]),s("div",Kt,[i(r(D),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[5]||(e[5]=s("p",{class:"text-xs text-white/70 mb-1"},"Selisih",-1)),s("p",{class:h(["text-sm font-bold",t.transactions.summary.net_amount>=0?"text-white":"text-coral-200"])},c(r(f)(t.transactions.summary.net_amount,"decimal")),3)])])]),x.value?(n(),d("div",Rt,[s("div",{class:"flex items-center gap-2 mb-2"},[e[6]||(e[6]=s("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Filter Aktif:",-1)),s("button",{onClick:I,class:"text-xs text-teal-600 hover:text-teal-700 font-medium"}," Hapus Semua ")]),s("div",Ut,[o.value.search?(n(),d("div",Wt,[i(r(P),{class:"w-3 h-3"}),s("span",null,c(o.value.search),1),s("button",{onClick:e[0]||(e[0]=a=>S("search")),class:"ml-1 hover:bg-teal-200 dark:hover:bg-teal-800 rounded-full p-0.5"},[i(r(w),{class:"w-3 h-3"})])])):m("",!0),o.value.type&&o.value.type!=="both"?(n(),d("div",Xt,[s("span",null,c(o.value.type==="income"?"Pemasukan":"Pengeluaran"),1),s("button",{onClick:e[1]||(e[1]=a=>S("type")),class:"ml-1 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5"},[i(r(w),{class:"w-3 h-3"})])])):m("",!0),(n(!0),d(p,null,g(o.value.account_ids||[],a=>(n(),d("div",{key:`account-${a}`,class:"flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm"},[s("span",null,c(t.transactions.master_data.accounts.find(l=>l.id===a)?.name||`Account ${a}`),1),s("button",{onClick:l=>J(a),class:"ml-1 hover:bg-green-200 dark:hover:bg-green-800 rounded-full p-0.5"},[i(r(w),{class:"w-3 h-3"})],8,Yt)]))),128)),(n(!0),d(p,null,g(o.value.category_ids||[],a=>(n(),d("div",{key:`category-${a}`,class:"flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm"},[s("span",null,c([...t.transactions.master_data.income_categories,...t.transactions.master_data.expense_categories].find(l=>l.id===a)?.name||`Category ${a}`),1),s("button",{onClick:l=>Q(a),class:"ml-1 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-full p-0.5"},[i(r(w),{class:"w-3 h-3"})],8,Jt)]))),128)),o.value.amount_min||o.value.amount_max?(n(),d("div",Qt,[i(r(D),{class:"w-3 h-3"}),s("span",null,c(o.value.amount_min?r(f)(o.value.amount_min,"decimal"):"0")+" - "+c(o.value.amount_max?r(f)(o.value.amount_max,"decimal"):"∞"),1),s("button",{onClick:e[2]||(e[2]=a=>S("amount")),class:"ml-1 hover:bg-orange-200 dark:hover:bg-orange-800 rounded-full p-0.5"},[i(r(w),{class:"w-3 h-3"})])])):m("",!0)])])):m("",!0),s("div",Zt,[(n(!0),d(p,null,g(t.transactions.data,a=>(n(),d("div",{key:a.date,class:"bg-white dark:bg-gray-800 shadow-md border-gray-200 dark:border-gray-700 rounded-xl mb-4 overflow-visible"},[s("div",te,[s("div",ee,[s("div",ae,[i(r(B),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s("span",se,c(Y(a.date)),1)]),s("div",oe,[s("span",{class:h(["text-sm font-semibold",a.amount>=0?"text-teal-600 dark:text-teal-400":"text-coral-600 dark:text-coral-400"])},c(r(f)(a.amount,"currency")),3)])])]),s("div",re,[(n(!0),d(p,null,g(a.transactions,l=>(n(),_(ft,{key:l.id,transaction:l,onAction:et,onAccountClick:Z,onCategoryClick:tt},null,8,["transaction"]))),128))])]))),128)),t.transactions.data.length===0?(n(),d("div",ne,[s("div",le,[i(r(D),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),e[7]||(e[7]=s("p",{class:"text-lg font-medium"},"Tidak ada transaksi",-1)),s("p",ie,c(x.value?"Tidak ada transaksi yang sesuai dengan filter yang dipilih":`Belum ada transaksi di ${t.$page.props.currentMonthLabel}`),1)]),s("div",de,[x.value?(n(),d("button",{key:0,onClick:I,class:"w-full py-3 text-teal-600 border border-teal-600 rounded-xl hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-colors duration-200 font-medium"}," Hapus Filter ")):m("",!0),i(r(O),{href:"/transactions/create",class:"w-full py-3 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors duration-200 font-medium text-center"},{default:M(()=>e[8]||(e[8]=[ct(" Tambah Transaksi ",-1)])),_:1,__:[8]})])])):m("",!0)]),k.value?(n(),_(pt,{key:1,"initial-query":o.value.search||"",onApply:W,onClose:T},null,8,["initial-query"])):m("",!0),C.value?(n(),_(gt,{key:2,filters:o.value,"master-data":{accounts:t.transactions.master_data.accounts?.map(a=>({id:a.id,name:a.name,current_balance:a.current_balance,category:a.category?{id:a.category.id,name:a.category.name,type:a.category.type||""}:null}))||[],income_categories:t.transactions.master_data.income_categories,expense_categories:t.transactions.master_data.expense_categories,tags:t.transactions.master_data.tags,flag_options:t.transactions.master_data.flag_options,type_options:t.transactions.master_data.type_options,period_options:t.transactions.master_data.period_options},onApply:u,onClose:K},null,8,["filters","master-data"])):m("",!0),i(r(O),{href:"/transactions/create",title:"Buat transaksi",class:"fixed bottom-20 right-6 w-14 h-14 bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-105 active:scale-95"},{default:M(()=>[i(r(ut),{class:"w-6 h-6 text-white"})]),_:1})]),_:1}))}}),Ee=kt(ce,[["__scopeId","data-v-67e63df8"]]);export{Ee as default};
