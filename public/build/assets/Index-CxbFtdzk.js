import{d as Y,m as Z,z as v,P as $,c as I,H as tt,h as b,o as r,w as j,f as l,e as a,a as d,b as m,u as n,j as et,t as c,g as _,F as g,r as x,l as at,k as st,B as ot}from"./app-COT72Iw0.js";import{F as nt}from"./FinancialAppLayout--zXqkuRt.js";import{u as rt}from"./useTranslation-C0OjZJjs.js";import{f as p}from"./formatCurrency-6zMsDc4Z.js";import it from"./SearchModal-DlgxOiFj.js";import lt from"./FilterModal-CuPBq1Z-.js";import dt from"./TransactionCard-q5Zel1wF.js";import{S as L}from"./search-kZ7H9qw6.js";import{F as ct}from"./filter-DNRE9pFV.js";import{c as ut}from"./createLucideIcon-Bw02f92V.js";import{C as O}from"./calendar-DDyX0bZx.js";import{C as mt}from"./chevron-right-DTGbh6bv.js";import{T as pt}from"./trending-up-fevLTHma.js";import{T as ht}from"./trending-down-CX0AYCFq.js";import{D as F}from"./dollar-sign-UWnE2-qZ.js";import{X as f}from"./x-DnJDKQRh.js";import{_ as gt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useDarkMode-uOoH3_Gv.js";import"./settings-BPXH-K5_.js";import"./sun-BEbIyfp_.js";import"./rotate-ccw-B-9Lvihx.js";import"./credit-card-LuFve70m.js";import"./folder-open-yrAGppNu.js";import"./tag-OmMr-WSN.js";import"./receipt--TOAEsCo.js";import"./arrow-right-left-EYScWqBm.js";import"./trash-2-BNkRaY3T.js";import"./eye-BQOfmcCA.js";import"./square-pen-M9ukCN84.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ut("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ft={class:"bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-b-[24px] px-4 pt-4 pb-6 mb-4 shadow-lg dark:shadow-2xl"},vt={class:"flex items-center justify-between mb-4"},bt={class:"flex-1 min-w-0"},_t={class:"text-xl font-semibold text-white truncate"},wt={class:"text-sm text-teal-100 dark:text-teal-200 truncate"},yt={class:"flex items-center gap-2 ml-3"},kt={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full"},Ct={class:"mb-4"},Ft={class:"flex overflow-x-auto pb-2 -mx-4 px-4 gap-2 scrollbar-hide"},St=["onClick"],Mt={key:0,class:"flex items-center justify-between mb-4 bg-white/10 rounded-xl p-3"},At={class:"flex items-center gap-2 text-white"},Dt={class:"font-medium"},Tt={class:"grid grid-cols-3 gap-3"},$t={class:"bg-white/10 rounded-xl p-3 text-center"},It={class:"text-sm font-bold text-white"},jt={class:"bg-white/10 rounded-xl p-3 text-center"},Lt={class:"text-sm font-bold text-white"},Ot={class:"bg-white/10 rounded-xl p-3 text-center"},Bt={key:0,class:"px-4 mb-4"},Ht={class:"flex flex-wrap gap-2"},Pt={key:0,class:"flex items-center gap-1 px-3 py-1 bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 rounded-full text-sm"},Nt={key:1,class:"flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm"},Vt=["onClick"],qt=["onClick"],zt={key:2,class:"flex items-center gap-1 px-3 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full text-sm"},Et={class:"px-2"},Gt={class:"bg-gray-50/95 dark:bg-gray-700/95 px-4 py-3 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20 backdrop-blur-sm rounded-t-xl"},Kt={class:"flex items-center justify-between"},Rt={class:"flex items-center gap-2"},Ut={class:"text-sm font-medium text-gray-900 dark:text-white"},Wt={class:"text-right"},Xt={class:"divide-y divide-gray-100 dark:divide-gray-700"},Jt={key:0,class:"text-center py-12 px-4"},Qt={class:"text-gray-400 mb-6"},Yt={class:"text-sm text-gray-500 mt-1"},Zt={class:"flex flex-col gap-3"},te=Y({__name:"Index",props:{transactions:{},pageTitle:{}},setup(B){const S=B;rt();const{success:ee,error:H,warning:P,info:M}=Z(),w=v(!1),y=v(!1),k=v(!1),o=v({...S.transactions.filters});$(()=>S.transactions.filters,t=>{o.value={...t}},{immediate:!0,deep:!0});const A=I(()=>{const t=o.value.period||"month";if(t==="today")return"Hari Ini";if(t==="week")return"Minggu Ini";if(t==="year")return"Tahun Ini";if(t==="all")return"Semua Waktu";if(t==="month"){const e=o.value.month||new Date().toISOString().slice(0,7);return new Date(e+"-01").toLocaleDateString("id-ID",{month:"long",year:"numeric"})}return t==="custom"&&o.value.date_from&&o.value.date_to?`${o.value.date_from} - ${o.value.date_to}`:"Filter Aktif"}),h=I(()=>{const t=o.value;return!!(t.search||t.account_ids&&t.account_ids.length>0||t.category_ids&&t.category_ids.length>0||t.tag_ids&&t.tag_ids.length>0||t.flags&&t.flags.length>0||t.type!=="both"||t.amount_min||t.amount_max||t.period!=="month")}),N=()=>{y.value=!0},D=()=>{y.value=!1},V=()=>{k.value=!0},q=()=>{k.value=!1},z=()=>{const t=o.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()-1);const s=e.toISOString().slice(0,7);u({...o.value,month:s,period:"month"})},E=()=>{const t=o.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()+1);const s=e.toISOString().slice(0,7);u({...o.value,month:s,period:"month"})},G=t=>{u({...o.value,search:t}),D()},u=t=>{w.value=!0;const e=Object.fromEntries(Object.entries(t).filter(([s,i])=>Array.isArray(i)?i.length>0:i!=null&&i!==""));ot.get("/transactions",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1},onError:()=>{H("Gagal memuat data transaksi"),w.value=!1}})},T=()=>{u({period:"month",month:new Date().toISOString().slice(0,7),type:"both"})},K=t=>{u({...o.value,period:t})},R=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),C=t=>{const e={...o.value};t==="search"?delete e.search:t==="type"?e.type="both":t==="amount"&&(delete e.amount_min,delete e.amount_max),u(e)},U=t=>{const e={...o.value};e.account_ids=(e.account_ids||[]).filter(s=>s!==t),u(e)},W=t=>{const e={...o.value};e.category_ids=(e.category_ids||[]).filter(s=>s!==t),u(e)},X=t=>{const e=o.value.account_ids||[],s=e.includes(t)?e.filter(i=>i!==t):[...e,t];u({...o.value,account_ids:s})},J=t=>{const e=o.value.category_ids||[],s=e.includes(t)?e.filter(i=>i!==t):[...e,t];u({...o.value,category_ids:s})},Q=(t,e)=>{switch(t){case"view":M("Fitur lihat detail akan segera hadir");break;case"edit":M("Fitur edit transaksi akan segera hadir");break;case"delete":P("Fitur hapus transaksi akan segera hadir");break}};return $(()=>o.value,t=>{},{deep:!0}),tt(()=>{}),(t,e)=>(r(),b(nt,{showHeader:!1,showFab:!1,containerClass:"px-0 pb-32"},{default:j(()=>[l(n(et),{title:t.pageTitle},null,8,["title"]),a("div",ft,[a("div",vt,[a("div",bt,[a("h1",_t,c(t.pageTitle),1),a("p",wt,c(A.value),1)]),a("div",yt,[a("button",{onClick:N,class:"p-3 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Cari"},[l(n(L),{class:"w-5 h-5"})]),a("button",{onClick:V,class:_([h.value?"bg-white/30 ring-2 ring-white/50":"bg-white/20 hover:bg-white/30","p-3 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center relative"]),title:"Filter"},[l(n(ct),{class:"w-5 h-5"}),h.value?(r(),d("div",kt)):m("",!0)],2)])]),a("div",Ct,[a("div",Ft,[(r(!0),d(g,null,x(t.transactions.master_data.period_options,s=>(r(),d("button",{key:s.value,onClick:i=>K(s.value),class:_(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 whitespace-nowrap min-h-[36px]",o.value.period===s.value||!o.value.period&&s.value==="month"?"bg-white text-teal-600 shadow-md":"bg-white/20 text-white hover:bg-white/30"])},c(s.label),11,St))),128))])]),(o.value.period||"month")==="month"?(r(),d("div",Mt,[a("button",{onClick:z,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[l(n(xt),{class:"w-5 h-5"})]),a("div",At,[l(n(O),{class:"w-4 h-4"}),a("span",Dt,c(A.value),1)]),a("button",{onClick:E,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[l(n(mt),{class:"w-5 h-5"})])])):m("",!0),a("div",Tt,[a("div",$t,[l(n(pt),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[3]||(e[3]=a("p",{class:"text-xs text-white/70 mb-1"},"Masuk",-1)),a("p",It,c(n(p)(t.transactions.summary.total_income,"decimal")),1)]),a("div",jt,[l(n(ht),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[4]||(e[4]=a("p",{class:"text-xs text-white/70 mb-1"},"Keluar",-1)),a("p",Lt,c(n(p)(t.transactions.summary.total_expense,"decimal")),1)]),a("div",Ot,[l(n(F),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[5]||(e[5]=a("p",{class:"text-xs text-white/70 mb-1"},"Selisih",-1)),a("p",{class:_(["text-sm font-bold",t.transactions.summary.net_amount>=0?"text-white":"text-coral-200"])},c(n(p)(t.transactions.summary.net_amount,"decimal")),3)])])]),h.value?(r(),d("div",Bt,[a("div",{class:"flex items-center gap-2 mb-2"},[e[6]||(e[6]=a("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Filter Aktif:",-1)),a("button",{onClick:T,class:"text-xs text-teal-600 hover:text-teal-700 font-medium"}," Hapus Semua ")]),a("div",Ht,[o.value.search?(r(),d("div",Pt,[l(n(L),{class:"w-3 h-3"}),a("span",null,c(o.value.search),1),a("button",{onClick:e[0]||(e[0]=s=>C("search")),class:"ml-1 hover:bg-teal-200 dark:hover:bg-teal-800 rounded-full p-0.5"},[l(n(f),{class:"w-3 h-3"})])])):m("",!0),o.value.type&&o.value.type!=="both"?(r(),d("div",Nt,[a("span",null,c(o.value.type==="income"?"Pemasukan":"Pengeluaran"),1),a("button",{onClick:e[1]||(e[1]=s=>C("type")),class:"ml-1 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5"},[l(n(f),{class:"w-3 h-3"})])])):m("",!0),(r(!0),d(g,null,x(o.value.account_ids||[],s=>(r(),d("div",{key:`account-${s}`,class:"flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm"},[a("span",null,c(t.transactions.master_data.accounts.find(i=>i.id===s)?.name||`Account ${s}`),1),a("button",{onClick:i=>U(s),class:"ml-1 hover:bg-green-200 dark:hover:bg-green-800 rounded-full p-0.5"},[l(n(f),{class:"w-3 h-3"})],8,Vt)]))),128)),(r(!0),d(g,null,x(o.value.category_ids||[],s=>(r(),d("div",{key:`category-${s}`,class:"flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm"},[a("span",null,c([...t.transactions.master_data.income_categories,...t.transactions.master_data.expense_categories].find(i=>i.id===s)?.name||`Category ${s}`),1),a("button",{onClick:i=>W(s),class:"ml-1 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-full p-0.5"},[l(n(f),{class:"w-3 h-3"})],8,qt)]))),128)),o.value.amount_min||o.value.amount_max?(r(),d("div",zt,[l(n(F),{class:"w-3 h-3"}),a("span",null,c(o.value.amount_min?n(p)(o.value.amount_min,"decimal"):"0")+" - "+c(o.value.amount_max?n(p)(o.value.amount_max,"decimal"):"âˆž"),1),a("button",{onClick:e[2]||(e[2]=s=>C("amount")),class:"ml-1 hover:bg-orange-200 dark:hover:bg-orange-800 rounded-full p-0.5"},[l(n(f),{class:"w-3 h-3"})])])):m("",!0)])])):m("",!0),a("div",Et,[(r(!0),d(g,null,x(t.transactions.data,s=>(r(),d("div",{key:s.date,class:"bg-white dark:bg-gray-800 shadow-md border-gray-200 dark:border-gray-700 rounded-xl mb-4 overflow-visible"},[a("div",Gt,[a("div",Kt,[a("div",Rt,[l(n(O),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),a("span",Ut,c(R(s.date)),1)]),a("div",Wt,[a("span",{class:_(["text-sm font-semibold",s.amount>=0?"text-teal-600 dark:text-teal-400":"text-coral-600 dark:text-coral-400"])},c(n(p)(s.amount,"currency")),3)])])]),a("div",Xt,[(r(!0),d(g,null,x(s.transactions,i=>(r(),b(dt,{key:i.id,transaction:i,onAction:Q,onAccountClick:X,onCategoryClick:J},null,8,["transaction"]))),128))])]))),128)),t.transactions.data.length===0?(r(),d("div",Jt,[a("div",Qt,[l(n(F),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),e[7]||(e[7]=a("p",{class:"text-lg font-medium"},"Tidak ada transaksi",-1)),a("p",Yt,c(h.value?"Tidak ada transaksi yang sesuai dengan filter yang dipilih":`Belum ada transaksi di ${t.$page.props.currentMonthLabel}`),1)]),a("div",Zt,[h.value?(r(),d("button",{key:0,onClick:T,class:"w-full py-3 text-teal-600 border border-teal-600 rounded-xl hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-colors duration-200 font-medium"}," Hapus Filter ")):m("",!0),l(n(at),{href:"/transactions/create",class:"w-full py-3 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors duration-200 font-medium text-center"},{default:j(()=>e[8]||(e[8]=[st(" Tambah Transaksi ",-1)])),_:1,__:[8]})])])):m("",!0)]),y.value?(r(),b(it,{key:1,"initial-query":o.value.search||"",onApply:G,onClose:D},null,8,["initial-query"])):m("",!0),k.value?(r(),b(lt,{key:2,filters:o.value,"master-data":{accounts:t.transactions.master_data.accounts?.map(s=>({id:s.id,name:s.name,current_balance:s.current_balance,category:s.category?{id:s.category.id,name:s.category.name,type:s.category.type||""}:null}))||[],income_categories:t.transactions.master_data.income_categories,expense_categories:t.transactions.master_data.expense_categories,tags:t.transactions.master_data.tags,flag_options:t.transactions.master_data.flag_options,type_options:t.transactions.master_data.type_options,period_options:t.transactions.master_data.period_options},onApply:u,onClose:q},null,8,["filters","master-data"])):m("",!0)]),_:1}))}}),$e=gt(te,[["__scopeId","data-v-e20e1add"]]);export{$e as default};
