import{C as U}from"./calendar-SKuSpPmZ.js";import{D as F}from"./dollar-sign-BzQbBCJ4.js";import{R as w}from"./receipt-BbLcCrRq.js";import{C as I}from"./chevron-down-BTN4nR3P.js";import{C as P}from"./chevron-up-BS-YKGPK.js";import{E as R,T as M}from"./trash-2-wvX_ty58.js";import{E as q}from"./eye-BZg4EPmq.js";import{S as H}from"./square-pen-C6rkIcZK.js";import{C as K}from"./credit-card-idfVhOba.js";import{T as O}from"./tag-D2GmiHcw.js";import{T as G}from"./trending-up-DzGs57vs.js";import{T as J}from"./trending-down-DD6C5d0R.js";import{A as Q}from"./arrow-right-left-BhoaVOew.js";import{d as W,z as X,c as C,a as n,o as a,e as t,b as l,t as d,f as c,h as b,u as g,i as h,F as k,r as T,g as m,k as f}from"./app-CaiDP2yu.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-IY6PpO-b.js";const Z={class:"relative"},ee={key:0,class:"absolute inset-0 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm z-10 flex items-center justify-center rounded-xl"},te={class:"space-y-3"},re={key:0,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"},se={class:"flex items-center gap-3 cursor-pointer"},ae=["checked","indeterminate"],oe={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},ne={class:"flex items-center gap-2"},le={class:"flex items-start gap-3 mb-3"},de=["checked","onChange"],ie={class:"flex-1 min-w-0"},ce={class:"flex items-start justify-between"},ge={class:"flex-1 min-w-0"},ue={class:"text-sm font-semibold text-gray-900 dark:text-white truncate"},me={class:"flex items-center gap-2 mt-1"},ye={class:"text-xs text-gray-500 dark:text-gray-400"},xe={class:"text-right ml-3 flex-shrink-0"},pe={class:"relative flex-shrink-0"},be=["onClick"],he={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-20"},ke={class:"py-1"},fe=["onClick"],ve=["onClick"],_e=["onClick"],we={class:"flex items-center justify-between pt-3 border-t border-gray-100 dark:border-gray-700"},Ce={class:"flex items-center gap-2"},Te={class:"text-xs text-gray-600 dark:text-gray-400"},Se={class:"font-medium"},De={key:0,class:"text-gray-500"},Ae={class:"flex items-center gap-2"},$e={class:"text-xs text-gray-600 dark:text-gray-400 font-medium"},Be={key:0,class:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},je={class:"flex flex-wrap gap-1"},Ee={key:1,class:"text-center py-8 px-4"},ze={class:"text-gray-400 mb-4"},Ve=W({__name:"TransactionTable",props:{transactions:{},loading:{type:Boolean},selectedTransactions:{},currentSort:{}},emits:["sortChange","selectionChange","action"],setup(S,{emit:D}){const o=S,y=D,u=X(null),v=e=>{let s="desc";o.currentSort?.by===e&&(s=o.currentSort.order==="desc"?"asc":"desc"),y("sortChange",{sort_by:e,sort_order:s})},x=e=>o.currentSort?.by!==e?null:o.currentSort.order==="desc"?I:P,A=e=>{u.value=u.value===e?null:e},p=(e,s)=>{y("action",e,s),u.value=null},$=e=>{const s=o.selectedTransactions||[],r=s.includes(e)?s.filter(i=>i!==e):[...s,e];y("selectionChange",r)},B=()=>{const e=o.transactions.map(r=>r.id),s=e.every(r=>o.selectedTransactions?.includes(r));y("selectionChange",s?[]:e)},_=e=>o.selectedTransactions?.includes(e)||!1,j=C(()=>o.transactions.length?o.transactions.every(e=>o.selectedTransactions?.includes(e.id)):!1),E=C(()=>{const e=o.selectedTransactions?.length||0;return e>0&&e<o.transactions.length}),z=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),V=e=>{switch(e.flag){case"transfer_in":case"transfer_out":return Q;case"debt_payment":case"debt_collect":return w;default:return e.type==="income"?G:J}},L=e=>e.type==="income"?"text-teal-600 dark:text-teal-400":"text-coral-600 dark:text-coral-400",N=e=>{switch(e){case"transfer_in":case"transfer_out":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"debt_payment":case"debt_collect":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"initial_balance":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return(e,s)=>(a(),n(k,null,[t("div",Z,[e.loading?(a(),n("div",ee,s[3]||(s[3]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"},null,-1)]))):l("",!0),t("div",te,[e.transactions.length>0?(a(),n("div",re,[t("label",se,[t("input",{type:"checkbox",checked:j.value,indeterminate:E.value,onChange:B,class:"text-teal-600 border-gray-300 dark:border-gray-600 rounded focus:ring-teal-500"},null,40,ae),t("span",oe,d(e.selectedTransactions?.length||0)+" dari "+d(e.transactions.length)+" dipilih ",1)]),t("div",ne,[t("button",{onClick:s[0]||(s[0]=r=>v("date")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",title:"Urutkan berdasarkan tanggal"},[c(g(U),{class:"w-4 h-4"}),x("date")?(a(),b(h(x("date")),{key:0,class:"w-3 h-3 ml-1"})):l("",!0)]),t("button",{onClick:s[1]||(s[1]=r=>v("amount")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",title:"Urutkan berdasarkan jumlah"},[c(g(F),{class:"w-4 h-4"}),x("amount")?(a(),b(h(x("amount")),{key:0,class:"w-3 h-3 ml-1"})):l("",!0)])])])):l("",!0),(a(!0),n(k,null,T(e.transactions,r=>(a(),n("div",{key:r.id,class:m(["bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 transition-all duration-200 hover:shadow-md",_(r.id)?"ring-2 ring-teal-500 border-teal-500":""])},[t("div",le,[t("input",{type:"checkbox",checked:_(r.id),onChange:i=>$(r.id),class:"mt-1 text-teal-600 border-gray-300 dark:border-gray-600 rounded focus:ring-teal-500"},null,40,de),t("div",{class:m(["flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center",r.type==="income"?"bg-teal-100 dark:bg-teal-900":"bg-coral-100 dark:bg-coral-900"])},[(a(),b(h(V(r)),{class:m(["w-6 h-6",r.type==="income"?"text-teal-600 dark:text-teal-400":"text-coral-600 dark:text-coral-400"])},null,8,["class"]))],2),t("div",ie,[t("div",ce,[t("div",ge,[t("h3",ue,d(r.note||"Transaksi "+(r.type==="income"?"Pemasukan":"Pengeluaran")),1),t("div",me,[t("span",ye,d(z(r.date)),1),r.flag!=="normal"?(a(),n("span",{key:0,class:m(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",N(r.flag)])},d(r.flag_label),3)):l("",!0)])]),t("div",xe,[t("div",{class:m(["text-lg font-bold",L(r)])},d(r.formatted_amount),3)])])]),t("div",pe,[t("button",{onClick:i=>A(r.id),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200"},[c(g(R),{class:"w-4 h-4"})],8,be),u.value===r.id?(a(),n("div",he,[t("div",ke,[t("button",{onClick:i=>p("view",r.id),class:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"},[c(g(q),{class:"w-4 h-4"}),s[4]||(s[4]=f(" Lihat Detail ",-1))],8,fe),t("button",{onClick:i=>p("edit",r.id),class:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"},[c(g(H),{class:"w-4 h-4"}),s[5]||(s[5]=f(" Edit ",-1))],8,ve),s[7]||(s[7]=t("hr",{class:"my-1 border-gray-200 dark:border-gray-600"},null,-1)),t("button",{onClick:i=>p("delete",r.id),class:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200"},[c(g(M),{class:"w-4 h-4"}),s[6]||(s[6]=f(" Hapus ",-1))],8,_e)])])):l("",!0)])]),t("div",we,[t("div",Ce,[c(g(K),{class:"w-4 h-4 text-gray-400"}),t("div",Te,[t("span",Se,d(r.account?.name||"Akun Tidak Diketahui"),1),r.account?.category?(a(),n("span",De," â€¢ "+d(r.account.category.name),1)):l("",!0)])]),t("div",Ae,[t("div",{class:m(["w-3 h-3 rounded-full flex-shrink-0",r.category?.type==="income"?"bg-teal-500":"bg-coral-500"])},null,2),t("span",$e,d(r.category?.name||"Kategori Tidak Diketahui"),1)])]),r.tags&&r.tags.length>0?(a(),n("div",Be,[c(g(O),{class:"w-4 h-4 text-gray-400"}),t("div",je,[(a(!0),n(k,null,T(r.tags,i=>(a(),n("span",{key:i.id,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},d(i.name),1))),128))])])):l("",!0)],2))),128))]),!e.transactions.length&&!e.loading?(a(),n("div",Ee,[t("div",ze,[c(g(w),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),s[8]||(s[8]=t("p",{class:"text-base font-medium"},"Tidak ada transaksi",-1)),s[9]||(s[9]=t("p",{class:"text-sm text-gray-500 mt-1"},"Belum ada transaksi yang ditampilkan",-1))])])):l("",!0)]),u.value?(a(),n("div",{key:0,onClick:s[2]||(s[2]=r=>u.value=null),class:"fixed inset-0 z-10"})):l("",!0)],64))}}),Xe=Y(Ve,[["__scopeId","data-v-c9ad07e2"]]);export{Xe as default};
