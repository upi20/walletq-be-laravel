import{d as ot,m as rt,z as b,P as O,c as S,H as nt,h as w,o as n,w as j,f as i,e as s,a as d,b as m,u as r,j as lt,t as c,g as h,F as p,r as g,l as it,k as dt,B as ct}from"./app-BiaDTR1O.js";import{F as ut}from"./FinancialAppLayout-DsZ8W9YU.js";import{u as mt}from"./useTranslation-gCuhQKsD.js";import{f as v}from"./formatCurrency-6zMsDc4Z.js";import ht from"./SearchModal-DJYDwAER.js";import pt from"./FilterModal-zyyWsL8G.js";import gt from"./TransactionCard-EciwRBxj.js";import{S as L}from"./search-u3ZPmIP7.js";import{F as vt}from"./filter-KExE_DVD.js";import{c as xt}from"./createLucideIcon-baM7lQa7.js";import{C as B}from"./calendar-DNw4eyl5.js";import{C as ft}from"./chevron-down--EqNmj_-.js";import{C as bt}from"./chevron-right-DsmXVqJn.js";import{T as _t}from"./trending-up-C8gGMAVJ.js";import{T as wt}from"./trending-down-W7Kxj_Fo.js";import{D as M}from"./dollar-sign-VI_elAN2.js";import{X as _}from"./x-CRZLCv7u.js";import{_ as yt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useDarkMode-8ls-__Ed.js";import"./settings-BtC2eTqo.js";import"./sun-BFzI-Mo4.js";import"./rotate-ccw-GvRq_HiA.js";import"./credit-card-BK3Pv6UG.js";import"./folder-open-Cb8JNfUc.js";import"./tag-TbD50gpJ.js";import"./receipt-BTKbEWvH.js";import"./arrow-right-left-CuOglAXx.js";import"./ellipsis-vertical-BGlWSPwN.js";import"./eye-Begbo2Xz.js";import"./square-pen-BRY93kbX.js";import"./trash-2-DtJsGx1I.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=xt("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ct={class:"bg-gradient-to-r from-teal-500 to-teal-600 dark:from-teal-600 dark:to-teal-700 rounded-b-[24px] px-4 pt-4 pb-6 mb-4 shadow-lg dark:shadow-2xl"},Ft={class:"flex items-center justify-between mb-4"},St={class:"flex-1 min-w-0"},Mt={class:"text-xl font-semibold text-white truncate"},Dt={class:"text-sm text-teal-100 dark:text-teal-200 truncate"},At={class:"flex items-center gap-2 ml-3"},Tt={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full"},$t={class:"mb-4"},It={class:"flex overflow-x-auto pb-2 -mx-4 px-4 gap-2 scrollbar-hide"},Ot=["onClick"],jt={key:0,class:"flex items-center justify-between mb-4 bg-white/10 rounded-xl p-3"},Lt={class:"relative"},Bt={class:"font-medium"},Pt={key:0,class:"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-64 overflow-y-auto"},Ht=["onClick"],zt={class:"grid grid-cols-3 gap-3"},Nt={class:"bg-white/10 rounded-xl p-3 text-center"},Vt={class:"text-sm font-bold text-white"},qt={class:"bg-white/10 rounded-xl p-3 text-center"},Et={class:"text-sm font-bold text-white"},Gt={class:"bg-white/10 rounded-xl p-3 text-center"},Kt={key:0,class:"px-4 mb-4"},Rt={class:"flex flex-wrap gap-2"},Ut={key:0,class:"flex items-center gap-1 px-3 py-1 bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 rounded-full text-sm"},Wt={key:1,class:"flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm"},Xt=["onClick"],Yt=["onClick"],Jt={key:2,class:"flex items-center gap-1 px-3 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full text-sm"},Qt={class:"px-2"},Zt={class:"bg-gray-50/95 dark:bg-gray-700/95 px-4 py-3 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20 backdrop-blur-sm rounded-t-xl"},te={class:"flex items-center justify-between"},ee={class:"flex items-center gap-2"},ae={class:"text-sm font-medium text-gray-900 dark:text-white"},se={class:"text-right"},oe={class:"divide-y divide-gray-100 dark:divide-gray-700"},re={key:0,class:"text-center py-12 px-4"},ne={class:"text-gray-400 mb-6"},le={class:"text-sm text-gray-500 mt-1"},ie={class:"flex flex-col gap-3"},de=ot({__name:"Index",props:{transactions:{},pageTitle:{}},setup(P){const D=P;mt();const{success:ce,error:H,warning:z,info:A}=rt(),y=b(!1),k=b(!1),C=b(!1),x=b(!1),o=b({...D.transactions.filters});O(()=>D.transactions.filters,t=>{o.value={...t}},{immediate:!0,deep:!0});const T=S(()=>{const t=o.value.period||"month";if(t==="today")return"Hari Ini";if(t==="week")return"Minggu Ini";if(t==="year")return"Tahun Ini";if(t==="all")return"Semua Waktu";if(t==="month"){const e=o.value.month||new Date().toISOString().slice(0,7);return new Date(e+"-01").toLocaleDateString("id-ID",{month:"long",year:"numeric"})}return t==="custom"&&o.value.date_from&&o.value.date_to?`${o.value.date_from} - ${o.value.date_to}`:"Filter Aktif"}),f=S(()=>{const t=o.value;return!!(t.search||t.account_ids&&t.account_ids.length>0||t.category_ids&&t.category_ids.length>0||t.tag_ids&&t.tag_ids.length>0||t.flags&&t.flags.length>0||t.type!=="both"||t.amount_min||t.amount_max||t.period!=="month")}),N=S(()=>{const t=[],e=new Date;for(let a=-12;a<=6;a++){const l=new Date(e.getFullYear(),e.getMonth()+a,1),at=l.toISOString().slice(0,7),st=l.toLocaleDateString("id-ID",{month:"long",year:"numeric"});t.push({value:at,label:st})}return t}),V=()=>{k.value=!0},$=()=>{k.value=!1},q=()=>{C.value=!0},E=()=>{C.value=!1},G=()=>{const t=o.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()-1);const a=e.toISOString().slice(0,7);u({...o.value,month:a,period:"month"})},K=()=>{const t=o.value.month||new Date().toISOString().slice(0,7),e=new Date(t+"-01");e.setMonth(e.getMonth()+1);const a=e.toISOString().slice(0,7);u({...o.value,month:a,period:"month"})},R=t=>{u({...o.value,search:t}),$()},u=t=>{y.value=!0;const e=Object.fromEntries(Object.entries(t).filter(([a,l])=>Array.isArray(l)?l.length>0:l!=null&&l!==""));ct.get("/transactions",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{y.value=!1},onError:()=>{H("Gagal memuat data transaksi"),y.value=!1}})},I=()=>{u({period:"month",month:new Date().toISOString().slice(0,7),type:"both"})},U=t=>{u({...o.value,period:t})},W=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),F=t=>{const e={...o.value};t==="search"?delete e.search:t==="type"?e.type="both":t==="amount"&&(delete e.amount_min,delete e.amount_max),u(e)},X=t=>{const e={...o.value};e.account_ids=(e.account_ids||[]).filter(a=>a!==t),u(e)},Y=t=>{const e={...o.value};e.category_ids=(e.category_ids||[]).filter(a=>a!==t),u(e)},J=t=>{const e=o.value.account_ids||[],a=e.includes(t)?e.filter(l=>l!==t):[...e,t];u({...o.value,account_ids:a})},Q=t=>{const e=o.value.category_ids||[],a=e.includes(t)?e.filter(l=>l!==t):[...e,t];u({...o.value,category_ids:a})},Z=(t,e)=>{switch(t){case"view":A("Fitur lihat detail akan segera hadir");break;case"edit":A("Fitur edit transaksi akan segera hadir");break;case"delete":z("Fitur hapus transaksi akan segera hadir");break}},tt=()=>{x.value=!x.value},et=t=>{u({...o.value,month:t,period:"month"}),x.value=!1};return O(()=>o.value,t=>{},{deep:!0}),nt(()=>{}),(t,e)=>(n(),w(ut,{showHeader:!1,showFab:!1,containerClass:"px-0 pb-32"},{default:j(()=>[i(r(lt),{title:t.pageTitle},null,8,["title"]),s("div",Ct,[s("div",Ft,[s("div",St,[s("h1",Mt,c(t.pageTitle),1),s("p",Dt,c(T.value),1)]),s("div",At,[s("button",{onClick:V,class:"p-3 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Cari"},[i(r(L),{class:"w-5 h-5"})]),s("button",{onClick:q,class:h([f.value?"bg-white/30 ring-2 ring-white/50":"bg-white/20 hover:bg-white/30","p-3 rounded-xl text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center relative"]),title:"Filter"},[i(r(vt),{class:"w-5 h-5"}),f.value?(n(),d("div",Tt)):m("",!0)],2)])]),s("div",$t,[s("div",It,[(n(!0),d(p,null,g(t.transactions.master_data.period_options,a=>(n(),d("button",{key:a.value,onClick:l=>U(a.value),class:h(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 whitespace-nowrap min-h-[36px]",o.value.period===a.value||!o.value.period&&a.value==="month"?"bg-white text-teal-600 shadow-md":"bg-white/20 text-white hover:bg-white/30"])},c(a.label),11,Ot))),128))])]),(o.value.period||"month")==="month"?(n(),d("div",jt,[s("button",{onClick:G,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[i(r(kt),{class:"w-5 h-5"})]),s("div",Lt,[s("button",{onClick:tt,class:"flex items-center gap-2 text-white cursor-pointer hover:bg-white/10 rounded-lg px-2 py-1 transition-colors duration-200"},[i(r(B),{class:"w-4 h-4"}),s("span",Bt,c(T.value),1),i(r(ft),{class:h(["w-3 h-3 transition-transform duration-200",{"rotate-180":x.value}])},null,8,["class"])]),x.value?(n(),d("div",Pt,[(n(!0),d(p,null,g(N.value,a=>(n(),d("button",{key:a.value,onClick:l=>et(a.value),class:h(["w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-900 dark:text-white",{"bg-teal-50 dark:bg-teal-900/20 text-teal-600 dark:text-teal-400":a.value===(o.value.month||new Date().toISOString().slice(0,7))}])},c(a.label),11,Ht))),128))])):m("",!0)]),s("button",{onClick:K,class:"p-2 hover:bg-white/20 rounded-lg text-white transition-colors duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center"},[i(r(bt),{class:"w-5 h-5"})])])):m("",!0),s("div",zt,[s("div",Nt,[i(r(_t),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[3]||(e[3]=s("p",{class:"text-xs text-white/70 mb-1"},"Masuk",-1)),s("p",Vt,c(r(v)(t.transactions.summary.total_income,"decimal")),1)]),s("div",qt,[i(r(wt),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[4]||(e[4]=s("p",{class:"text-xs text-white/70 mb-1"},"Keluar",-1)),s("p",Et,c(r(v)(t.transactions.summary.total_expense,"decimal")),1)]),s("div",Gt,[i(r(M),{class:"w-4 h-4 text-white mx-auto mb-1"}),e[5]||(e[5]=s("p",{class:"text-xs text-white/70 mb-1"},"Selisih",-1)),s("p",{class:h(["text-sm font-bold",t.transactions.summary.net_amount>=0?"text-white":"text-coral-200"])},c(r(v)(t.transactions.summary.net_amount,"decimal")),3)])])]),f.value?(n(),d("div",Kt,[s("div",{class:"flex items-center gap-2 mb-2"},[e[6]||(e[6]=s("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Filter Aktif:",-1)),s("button",{onClick:I,class:"text-xs text-teal-600 hover:text-teal-700 font-medium"}," Hapus Semua ")]),s("div",Rt,[o.value.search?(n(),d("div",Ut,[i(r(L),{class:"w-3 h-3"}),s("span",null,c(o.value.search),1),s("button",{onClick:e[0]||(e[0]=a=>F("search")),class:"ml-1 hover:bg-teal-200 dark:hover:bg-teal-800 rounded-full p-0.5"},[i(r(_),{class:"w-3 h-3"})])])):m("",!0),o.value.type&&o.value.type!=="both"?(n(),d("div",Wt,[s("span",null,c(o.value.type==="income"?"Pemasukan":"Pengeluaran"),1),s("button",{onClick:e[1]||(e[1]=a=>F("type")),class:"ml-1 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5"},[i(r(_),{class:"w-3 h-3"})])])):m("",!0),(n(!0),d(p,null,g(o.value.account_ids||[],a=>(n(),d("div",{key:`account-${a}`,class:"flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm"},[s("span",null,c(t.transactions.master_data.accounts.find(l=>l.id===a)?.name||`Account ${a}`),1),s("button",{onClick:l=>X(a),class:"ml-1 hover:bg-green-200 dark:hover:bg-green-800 rounded-full p-0.5"},[i(r(_),{class:"w-3 h-3"})],8,Xt)]))),128)),(n(!0),d(p,null,g(o.value.category_ids||[],a=>(n(),d("div",{key:`category-${a}`,class:"flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm"},[s("span",null,c([...t.transactions.master_data.income_categories,...t.transactions.master_data.expense_categories].find(l=>l.id===a)?.name||`Category ${a}`),1),s("button",{onClick:l=>Y(a),class:"ml-1 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-full p-0.5"},[i(r(_),{class:"w-3 h-3"})],8,Yt)]))),128)),o.value.amount_min||o.value.amount_max?(n(),d("div",Jt,[i(r(M),{class:"w-3 h-3"}),s("span",null,c(o.value.amount_min?r(v)(o.value.amount_min,"decimal"):"0")+" - "+c(o.value.amount_max?r(v)(o.value.amount_max,"decimal"):"∞"),1),s("button",{onClick:e[2]||(e[2]=a=>F("amount")),class:"ml-1 hover:bg-orange-200 dark:hover:bg-orange-800 rounded-full p-0.5"},[i(r(_),{class:"w-3 h-3"})])])):m("",!0)])])):m("",!0),s("div",Qt,[(n(!0),d(p,null,g(t.transactions.data,a=>(n(),d("div",{key:a.date,class:"bg-white dark:bg-gray-800 shadow-md border-gray-200 dark:border-gray-700 rounded-xl mb-4 overflow-visible"},[s("div",Zt,[s("div",te,[s("div",ee,[i(r(B),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s("span",ae,c(W(a.date)),1)]),s("div",se,[s("span",{class:h(["text-sm font-semibold",a.amount>=0?"text-teal-600 dark:text-teal-400":"text-coral-600 dark:text-coral-400"])},c(r(v)(a.amount,"currency")),3)])])]),s("div",oe,[(n(!0),d(p,null,g(a.transactions,l=>(n(),w(gt,{key:l.id,transaction:l,onAction:Z,onAccountClick:J,onCategoryClick:Q},null,8,["transaction"]))),128))])]))),128)),t.transactions.data.length===0?(n(),d("div",re,[s("div",ne,[i(r(M),{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),e[7]||(e[7]=s("p",{class:"text-lg font-medium"},"Tidak ada transaksi",-1)),s("p",le,c(f.value?"Tidak ada transaksi yang sesuai dengan filter yang dipilih":`Belum ada transaksi di ${t.$page.props.currentMonthLabel}`),1)]),s("div",ie,[f.value?(n(),d("button",{key:0,onClick:I,class:"w-full py-3 text-teal-600 border border-teal-600 rounded-xl hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-colors duration-200 font-medium"}," Hapus Filter ")):m("",!0),i(r(it),{href:"/transactions/create",class:"w-full py-3 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors duration-200 font-medium text-center"},{default:j(()=>e[8]||(e[8]=[dt(" Tambah Transaksi ",-1)])),_:1,__:[8]})])])):m("",!0)]),k.value?(n(),w(ht,{key:1,"initial-query":o.value.search||"",onApply:R,onClose:$},null,8,["initial-query"])):m("",!0),C.value?(n(),w(pt,{key:2,filters:o.value,"master-data":{accounts:t.transactions.master_data.accounts?.map(a=>({id:a.id,name:a.name,current_balance:a.current_balance,category:a.category?{id:a.category.id,name:a.category.name,type:a.category.type||""}:null}))||[],income_categories:t.transactions.master_data.income_categories,expense_categories:t.transactions.master_data.expense_categories,tags:t.transactions.master_data.tags,flag_options:t.transactions.master_data.flag_options,type_options:t.transactions.master_data.type_options,period_options:t.transactions.master_data.period_options},onApply:u,onClose:E},null,8,["filters","master-data"])):m("",!0)]),_:1}))}}),qe=yt(de,[["__scopeId","data-v-efd17bee"]]);export{qe as default};
